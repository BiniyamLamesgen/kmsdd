import{C,c,u as G,_ as H,T as f}from"./useServerDataTable-CyAAKgfs.js";import{_ as g}from"./index-C4qItS30.js";import{_ as D,a as S,b as E,c as $,d as F,e as B}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CRKjuGHD.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-KgpCTNUL.js";import{d as Q,s as u,p as _,u as W,c as b,o as x,a as l,b as s,h as X,w as a,e as r,k,i as Y,f as o,t as d,F as P,r as Z}from"./app-B8cnIyhQ.js";import{P as ee}from"./plus-BlhWpQ8-.js";import{E as te}from"./eye-DpXW5LCN.js";import{S as se}from"./square-pen-Bq_BF5T8.js";import"./VisuallyHidden-DfpOj_YV.js";import"./useForwardExpose-BKx_IIGC.js";const le={class:"space-y-6 p-6"},re={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ae={class:"flex justify-end"},ne={key:0,class:"space-y-4"},oe={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},de={class:"flex items-start space-x-2"},ie={class:"text-sm text-red-700 dark:text-red-300"},ue={class:"space-y-4"},me={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},ce={class:"flex items-start space-x-2"},fe={class:"text-sm text-red-700 dark:text-red-300"},pe={class:"max-h-32 overflow-y-auto"},ve={class:"text-sm text-gray-600 dark:text-gray-400"},ge={class:"mt-1 space-y-1"},$e=Q({__name:"Index",props:{endorsements:{}},setup(_e){const U=[{title:"Kms",href:u("dashboard")},{title:"Endorsements",href:u("endorsements.index")}],w=[C.id(),c("employee","Employee",{sortable:!0,searchable:!0,render:t=>t?.full_name??"-"}),c("employee","Position",{sortable:!0,searchable:!0,render:t=>t?.position??"-"}),c("employee","Department",{sortable:!0,searchable:!0,render:t=>t?.department??"-"}),c("skill","Skill",{sortable:!0,searchable:!0,render:t=>t?.skill_name??"-"}),c("endorser","Endorsed By",{sortable:!0,searchable:!0,render:t=>t?.full_name??"-"}),c("endorsement_date","Date",{sortable:!0,render:(t,e)=>e.formatted_date}),c("time_since_endorsement","Since",{render:t=>t??"-"}),C.createdAt()],{handleSearch:A,handleSort:T,handlePageChange:V,handleFilter:N,clearFilters:R,refresh:y,loading:I}=G({baseRoute:u("endorsements.index"),defaultSort:{field:"created_at",order:"desc"},defaultPerPage:10,columns:w.map(t=>({key:t.key,sortable:t.sortable,searchable:t.searchable}))}),v=_(!1),p=_(!1),i=_(null),m=_([]),h=W({}),j=t=>{i.value=t,v.value=!0},M=()=>{i.value&&h.delete(u("endorsements.destroy",i.value.id),{onBefore:()=>{v.value=!1,i.value=null},onSuccess:()=>y(),onError:()=>{}})},O=t=>{m.value=t,p.value=!0},q=()=>{const t=m.value.map(e=>e.id);k.post(u("endorsements.bulk-destroy"),{ids:t},{onSuccess:()=>{y(),p.value=!1,m.value=[]},onError:()=>{p.value=!1}})},K=[{icon:te,variant:"outline",tooltip:"View details",onClick:t=>{k.visit(u("endorsements.show",{id:t.id}))},class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{icon:se,variant:"outline",tooltip:"Edit",onClick:t=>{k.visit(u("endorsements.edit",{id:t.id}))},class:"text-green-600 hover:text-green-700 border-green-200 hover:border-green-300"},{icon:f,variant:"destructive",tooltip:"Delete",onClick:j,class:"text-red-600 hover:text-red-700"}],L=t=>{t.action==="delete"&&O(t.selectedRows)},z=()=>R();return(t,e)=>(x(),b(P,null,[l(s(X),{title:"Endorsements"}),l(J,{breadcrumbs:U},{default:a(()=>[r("div",le,[r("div",re,[e[6]||(e[6]=r("div",null,[r("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Endorsements "),r("p",{class:"text-gray-600 dark:text-gray-400"}," Manage employee skill endorsements ")],-1)),r("div",ae,[l(s(g),{onClick:e[0]||(e[0]=n=>s(k).visit(s(u)("endorsements.create"))),class:"flex w-full cursor-pointer items-center space-x-2 sm:w-auto"},{default:a(()=>[l(s(ee),{class:"h-4 w-4"}),e[5]||(e[5]=r("span",null,"Add Endorsement",-1))]),_:1})])]),l(H,{data:t.endorsements.data,columns:w,actions:K,"total-records":t.endorsements.meta.total,loading:s(I),"current-page":t.endorsements.meta.current_page,"default-rows-per-page":t.endorsements.meta.per_page,"last-page":t.endorsements.meta.last_page,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:s(A),onSort:s(T),onPageChange:s(V),onFilter:s(N),onClearFilters:z,onRefresh:s(y),onBulkAction:L},null,8,["data","total-records","loading","current-page","default-rows-per-page","last-page","onSearch","onSort","onPageChange","onFilter","onRefresh"])]),l(s(D),{open:v.value,"onUpdate:open":e[2]||(e[2]=n=>v.value=n)},{default:a(()=>[l(s(S),{class:"sm:max-w-md"},{default:a(()=>[l(s(E),null,{default:a(()=>[l(s($),{class:"flex items-center space-x-2"},{default:a(()=>[l(s(f),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=r("span",null,"Delete Endorsement",-1))]),_:1}),l(s(F),null,{default:a(()=>[...e[8]||(e[8]=[o(" Are you sure you want to delete this endorsement? ",-1)])]),_:1})]),_:1}),i.value?(x(),b("div",ne,[r("div",oe,[r("div",de,[l(s(f),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),r("div",ie,[r("strong",null,d(i.value.employee?.full_name??"Unknown"),1),e[9]||(e[9]=o(" (",-1)),r("span",null,d(i.value.skill?.skill_name??"Unknown"),1),e[10]||(e[10]=o(") endorsed by ",-1)),r("strong",null,d(i.value.endorser?.full_name??"Unknown"),1)])])])])):Y("",!0),l(s(B),{class:"space-x-2"},{default:a(()=>[l(s(g),{variant:"outline",onClick:e[1]||(e[1]=n=>v.value=!1)},{default:a(()=>[...e[11]||(e[11]=[o("Cancel",-1)])]),_:1}),l(s(g),{variant:"destructive",onClick:M,loading:s(h).processing},{default:a(()=>[l(s(f),{class:"mr-2 h-4 w-4"}),e[12]||(e[12]=o("Delete ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),l(s(D),{open:p.value,"onUpdate:open":e[4]||(e[4]=n=>p.value=n)},{default:a(()=>[l(s(S),{class:"sm:max-w-lg"},{default:a(()=>[l(s(E),null,{default:a(()=>[l(s($),{class:"flex items-center space-x-2"},{default:a(()=>[l(s(f),{class:"h-5 w-5 text-red-500"}),e[13]||(e[13]=r("span",null,"Delete Multiple Endorsements",-1))]),_:1}),l(s(F),null,{default:a(()=>[o(" Are you sure you want to delete "+d(m.value.length)+" selected items? ",1)]),_:1})]),_:1}),r("div",ue,[r("div",me,[r("div",ce,[l(s(f),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),r("div",fe,[r("strong",null,d(m.value.length)+" items",1),e[14]||(e[14]=o(" will be deleted. ",-1))])])]),r("div",pe,[r("div",ve,[e[15]||(e[15]=r("strong",null,"Items to be deleted:",-1)),r("ul",ge,[(x(!0),b(P,null,Z(m.value,n=>(x(),b("li",{key:n.id,class:"text-sm"}," â€¢ "+d(n.employee?.full_name??"Unknown")+" ("+d(n.skill?.skill_name??"Unknown")+") endorsed by "+d(n.endorser?.full_name??"Unknown"),1))),128))])])])]),l(s(B),{class:"space-x-2"},{default:a(()=>[l(s(g),{variant:"outline",onClick:e[3]||(e[3]=n=>p.value=!1)},{default:a(()=>[...e[16]||(e[16]=[o(" Cancel ",-1)])]),_:1}),l(s(g),{variant:"destructive",onClick:q,loading:s(h).processing},{default:a(()=>[l(s(f),{class:"mr-2 h-4 w-4"}),o(" Delete All ("+d(m.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{$e as default};
