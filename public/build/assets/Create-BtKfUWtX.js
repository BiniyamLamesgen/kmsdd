import{d as S,s as c,u as $,c as m,o as p,a as r,b as e,h as D,w as l,e as o,f as d,g as T,i as u,n as f,t as n,j as E,F as w,r as N,v as j,k as b}from"./app-CZ_92QqR.js";import{_ as x}from"./index-CTru82cN.js";import{_ as B,a as M,b as U,c as Y}from"./CardTitle.vue_vue_type_script_setup_true_lang-DfGcf0Z4.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-CKXr_5eH.js";import{_,a as g}from"./Label.vue_vue_type_script_setup_true_lang-B7j9Y3LL.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-T57IkxQE.js";import{A as q}from"./arrow-left-B3JA7Mme.js";import{S as L}from"./star-cuxqIf77.js";import{o as I,u as P,s as y,n as G}from"./types-D45As3cg.js";import"./useForwardExpose-4i7abMob.js";import"./VisuallyHidden-pKzkU6Eb.js";const H={class:"mx-auto max-w-6xl space-y-6 p-4 sm:p-6 lg:p-8"},J={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},K={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},O={class:"grid grid-cols-1 gap-6 lg:gap-8 xl:grid-cols-2"},Q={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 lg:gap-6"},R={class:"space-y-2"},W={key:0,class:"text-sm text-red-600"},X={class:"space-y-2 md:col-span-2 lg:col-span-1"},Z={key:0,class:"text-sm text-red-600"},ee={class:"space-y-2"},se={key:0,class:"text-sm text-red-600"},te={class:"space-y-2"},re=["value"],ae={key:0,class:"text-sm text-red-600"},oe={class:"flex flex-col items-center justify-end space-y-3 border-t pt-6 sm:flex-row sm:space-y-0 sm:space-x-4"},xe=S({__name:"Create",props:{employees:{}},setup(h){const k=h,V=[{title:"Achievements",href:c("achievements.index")},{title:"Create",href:""}],t=$({title:"",description:"",date_awarded:"",employee_id:""}),C=I({title:y().min(1,"Title is required").max(255),description:y().max(5e3).optional(),date_awarded:y().optional().refine(i=>!i||/^\d{4}-\d{2}-\d{2}$/.test(i),{message:"Date awarded must be a valid date (YYYY-MM-DD)"}),employee_id:P([y(),G()]).refine(i=>String(i).length>0,{message:"Employee is required"})}),A=()=>{const i=C.safeParse(t.data());if(t.errors={},!i.success){i.error.issues.forEach(a=>{a.path[0]&&(t.errors[a.path[0]]=a.message)});return}const s={...t.data(),employee_id:Number(t.employee_id)};t.post(c("achievements.store"),{...s,onSuccess:()=>{b.visit(c("achievements.index"))}})},v=()=>{b.visit(c("achievements.index"))};return(i,s)=>(p(),m(w,null,[r(e(D),{title:"Create Achievement"}),r(F,{breadcrumbs:V},{default:l(()=>[o("div",H,[o("div",J,[o("div",K,[r(e(x),{variant:"outline",size:"sm",onClick:v,class:"w-fit cursor-pointer"},{default:l(()=>[r(e(q),{class:"mr-2 h-4 w-4"}),s[4]||(s[4]=d(" Back ",-1))]),_:1}),s[5]||(s[5]=o("div",null,[o("h1",{class:"text-2xl font-semibold text-gray-900 sm:text-3xl dark:text-gray-100"}," Create Achievement "),o("p",{class:"text-sm text-gray-600 sm:text-base dark:text-gray-400"}," Add a new achievement to your organization. ")],-1))])]),o("form",{onSubmit:T(A,["prevent"]),class:"space-y-6"},[o("div",O,[r(e(B),{class:"xl:col-span-2"},{default:l(()=>[r(e(M),null,{default:l(()=>[r(e(U),{class:"flex items-center space-x-2"},{default:l(()=>[r(e(L),{class:"h-5 w-5"}),s[6]||(s[6]=o("span",null,"Achievement Information",-1))]),_:1}),r(e(z),null,{default:l(()=>[...s[7]||(s[7]=[d(" Enter the details for the new achievement. ",-1)])]),_:1})]),_:1}),r(e(Y),null,{default:l(()=>[o("div",Q,[o("div",R,[r(e(_),{for:"title"},{default:l(()=>[...s[8]||(s[8]=[d("Title *",-1)])]),_:1}),r(e(g),{id:"title",modelValue:e(t).title,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).title=a),placeholder:"Achievement title",class:f([{"border-red-500":e(t).errors.title},"w-full"])},null,8,["modelValue","class"]),e(t).errors.title?(p(),m("p",W,n(e(t).errors.title),1)):u("",!0)]),o("div",X,[r(e(_),{for:"description"},{default:l(()=>[...s[9]||(s[9]=[d("Description",-1)])]),_:1}),r(e(g),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).description=a),placeholder:"Achievement description",class:f([{"border-red-500":e(t).errors.description},"w-full"])},null,8,["modelValue","class"]),e(t).errors.description?(p(),m("p",Z,n(e(t).errors.description),1)):u("",!0)]),o("div",ee,[r(e(_),{for:"date_awarded"},{default:l(()=>[...s[10]||(s[10]=[d("Date Awarded",-1)])]),_:1}),r(e(g),{id:"date_awarded",type:"date",modelValue:e(t).date_awarded,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).date_awarded=a),class:f([{"border-red-500":e(t).errors.date_awarded},"w-full"])},null,8,["modelValue","class"]),e(t).errors.date_awarded?(p(),m("p",se,n(e(t).errors.date_awarded),1)):u("",!0)]),o("div",te,[r(e(_),{for:"employee_id"},{default:l(()=>[...s[11]||(s[11]=[d("Employee *",-1)])]),_:1}),E(o("select",{id:"employee_id","onUpdate:modelValue":s[3]||(s[3]=a=>e(t).employee_id=a),class:f(["w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",{"border-red-500":e(t).errors.employee_id}])},[s[12]||(s[12]=o("option",{value:"",disabled:""}," Select employee ",-1)),(p(!0),m(w,null,N(k.employees,a=>(p(),m("option",{key:a.id,value:a.id},n(a.first_name)+" "+n(a.last_name)+" ("+n(a.position)+", "+n(a.department)+") ",9,re))),128))],2),[[j,e(t).employee_id]]),e(t).errors.employee_id?(p(),m("p",ae,n(e(t).errors.employee_id),1)):u("",!0)])])]),_:1})]),_:1})]),o("div",oe,[r(e(x),{type:"button",variant:"outline",onClick:v,class:"order-2 w-full cursor-pointer sm:order-1 sm:w-auto"},{default:l(()=>[...s[13]||(s[13]=[d(" Cancel ",-1)])]),_:1}),r(e(x),{type:"submit",loading:e(t).processing,class:"order-1 w-full cursor-pointer sm:order-2 sm:w-auto",disabled:e(t).errors.title||e(t).errors.employee_id},{default:l(()=>[...s[14]||(s[14]=[d(" Create Achievement ",-1)])]),_:1},8,["loading","disabled"])])],32)])]),_:1})],64))}});export{xe as default};
