import{d as X,s as F,p as C,a6 as M,c as p,o as c,a as s,b as e,h as Y,w as a,e as i,i as g,g as Z,f as o,n as E,D as I,t as v,x as ee,F as te}from"./app-CZ_92QqR.js";import{_ as N}from"./index-CTru82cN.js";import{_ as se,a as le,b as ae,c as ie}from"./CardTitle.vue_vue_type_script_setup_true_lang-DfGcf0Z4.js";import{_ as re}from"./CardDescription.vue_vue_type_script_setup_true_lang-CKXr_5eH.js";import{_ as T,a as z}from"./Label.vue_vue_type_script_setup_true_lang-B7j9Y3LL.js";import{_ as oe}from"./Textarea.vue_vue_type_script_setup_true_lang-cltZrr1B.js";import{u as ne,a as b}from"./useValidatedForm-BafwLIQP.js";import{_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-T57IkxQE.js";import{C as j}from"./circle-alert-w_7y6GzN.js";import{o as ue,f as me,u as pe,s as D,i as ce}from"./types-D45As3cg.js";import"./useForwardExpose-4i7abMob.js";import"./VisuallyHidden-pKzkU6Eb.js";const fe={class:"container mx-auto max-w-3xl px-4 py-8"},ge={key:0,class:"relative mb-6"},ve=["src"],be={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},_e={class:"space-y-2"},xe={key:0,class:"mb-2 flex items-center gap-1 text-sm text-destructive"},he={class:"space-y-2"},ye={key:0,class:"mb-2 flex items-center gap-1 text-sm text-destructive"},we={class:"my-4 space-y-4"},Se={key:0,class:"mb-2 flex items-center gap-1 text-sm text-destructive"},Be={class:"flex items-center justify-between pt-6"},Oe=X({__name:"Edit",props:{heroSlide:{}},setup(A){const n=A,P=[{title:"Hero Slides",href:F("hero-slides.index")},{title:"Edit Hero Slide",href:"#"}],U=ue({title:D().min(3,"Title must be at least 3 characters").max(255,"Title must not exceed 255 characters"),description:D().min(10,"Description must be at least 10 characters").max(1e3,"Description must not exceed 1000 characters").optional(),image:pe([D().optional().refine(r=>!r||/^.*\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(r),{message:"Image must be a valid image file (jpg, jpeg, png, gif, bmp, webp)"}),ce(File,{message:"Image must be a file"}).refine(r=>["image/jpeg","image/png","image/gif","image/bmp","image/webp"].includes(r.type),{message:"Only image files are allowed"})]).optional(),order:me.number().int().min(0,"Order must be a positive integer").optional()}),L={title:n.heroSlide.data.title,description:n.heroSlide.data.description??"",image:void 0,order:n.heroSlide.data.order??0},m=C(null),H=C(null),d=C(null),q=ne(U,L,F("hero-slides.update",{heroSlide:n.heroSlide.data.id})),{isSubmitting:O,getBackendError:_,clearBackendError:x,hasBackendError:u,submitForm:G}=q,{value:h,errorMessage:y,handleBlur:J}=b("title"),{value:w,errorMessage:S,handleBlur:K}=b("description"),{value:B}=b("image"),{value:V,errorMessage:k,handleBlur:Q}=b("order");function W(r){const t=r.target.files;if(t&&t[0]){if(!U.shape.image.safeParse(t[0]).success){m.value=null,B.value=null,d.value=null;return}m.value=t[0],B.value=t[0];const f=new FileReader;f.onload=l=>{d.value=l.target?.result},f.readAsDataURL(t[0])}else m.value=null,B.value=null,d.value=null}const R=G(()=>{},()=>{},r=>(m.value instanceof File?r.image=m.value:delete r.image,r));return(r,t)=>{const $=M("FileText"),f=M("Save");return c(),p(te,null,[s(e(Y),{title:"Edit Hero Slide"}),s(de,{breadcrumbs:P},{default:a(()=>[i("div",fe,[d.value||n.heroSlide.data.image?(c(),p("div",ge,[i("img",{src:d.value!==null?d.value:n.heroSlide.data.image??void 0,alt:"Hero Slide Image",class:"h-64 w-full rounded-t object-cover"},null,8,ve),i("button",{type:"button",onClick:t[0]||(t[0]=l=>H.value?.click()),class:"absolute top-4 right-4 z-10 flex cursor-pointer items-center justify-center rounded-full border-4 border-black bg-white p-2 shadow-xl",style:{"background-color":"rgba(255, 255, 255, 0.98)","box-shadow":"0 2px 12px 2px rgba(0, 0, 0, 0.25)"}},[s($,{class:"h-5 w-5 text-black"}),t[8]||(t[8]=i("span",{class:"sr-only"},"Edit Image",-1))]),i("input",{ref_key:"imageInputRef",ref:H,id:"image",type:"file",accept:"image/*",onChange:W,class:"hidden"},null,544)])):g("",!0),i("form",{onSubmit:t[7]||(t[7]=Z((...l)=>e(R)&&e(R)(...l),["prevent"])),class:"space-y-6"},[s(e(se),null,{default:a(()=>[s(e(le),null,{default:a(()=>[s(e(ae),{class:"flex items-center gap-2"},{default:a(()=>[s($,{class:"h-5 w-5 text-primary"}),t[9]||(t[9]=o(" Basic Information ",-1))]),_:1}),s(e(re),null,{default:a(()=>[...t[10]||(t[10]=[o(" Update the basic details of this hero slide ",-1)])]),_:1})]),_:1}),s(e(ie),{class:"space-y-6"},{default:a(()=>[i("div",be,[i("div",_e,[s(e(T),{for:"title"},{default:a(()=>[...t[11]||(t[11]=[o("Title ",-1),i("span",{class:"text-red-600"},"*",-1)])]),_:1}),s(e(z),{id:"title",modelValue:e(h),"onUpdate:modelValue":t[1]||(t[1]=l=>I(h)?h.value=l:null),onBlur:e(J),onInput:t[2]||(t[2]=l=>e(x)("title")),placeholder:"Hero slide title",class:E(e(y)||e(u)("title")?"border-destructive":"")},null,8,["modelValue","onBlur","class"]),e(y)||e(u)("title")?(c(),p("p",xe,[s(e(j),{class:"h-3 w-3"}),o(" "+v(e(y)||e(_)("title")),1)])):g("",!0)]),i("div",he,[s(e(T),{for:"order"},{default:a(()=>[...t[12]||(t[12]=[o("Order",-1)])]),_:1}),s(e(z),{id:"order",modelValue:e(V),"onUpdate:modelValue":t[3]||(t[3]=l=>I(V)?V.value=l:null),onBlur:e(Q),onInput:t[4]||(t[4]=l=>e(x)("order")),type:"number",min:"0",placeholder:"Order",class:E(e(k)||e(u)("order")?"border-destructive":"")},null,8,["modelValue","onBlur","class"]),e(k)||e(u)("order")?(c(),p("p",ye,[s(e(j),{class:"h-3 w-3"}),o(" "+v(e(k)||e(_)("order")),1)])):g("",!0)])]),i("div",we,[s(e(T),{for:"description"},{default:a(()=>[...t[13]||(t[13]=[o("Description",-1)])]),_:1}),s(e(oe),{id:"description",modelValue:e(w),"onUpdate:modelValue":t[5]||(t[5]=l=>I(w)?w.value=l:null),onBlur:e(K),onInput:t[6]||(t[6]=l=>e(x)("description")),placeholder:"Description",rows:"4",class:E(["w-full",e(S)||e(u)("description")?"border-destructive":""])},null,8,["modelValue","onBlur","class"]),e(S)||e(u)("description")?(c(),p("p",Se,[s(e(j),{class:"h-3 w-3"}),o(" "+v(e(S)||e(_)("description")),1)])):g("",!0)])]),_:1})]),_:1}),i("div",Be,[s(e(ee),{href:e(F)("hero-slides.index")},{default:a(()=>[s(e(N),{variant:"outline",type:"button"},{default:a(()=>[...t[14]||(t[14]=[o(" Cancel ",-1)])]),_:1})]),_:1},8,["href"]),s(e(N),{type:"submit",disabled:e(O),class:"gap-2"},{default:a(()=>[s(f,{class:"h-4 w-4"}),o(" "+v(e(O)?"Updating...":"Update Hero Slide"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64)}}});export{Oe as default};
