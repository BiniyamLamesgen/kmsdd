import{d as Q,s as m,p as _,u as W,q as S,k as h,c as x,o as k,a as l,b as t,h as X,w as n,e as a,i as Z,f as p,t as d,F as D,r as ee}from"./app-B8cnIyhQ.js";import{u as te,c as o,T as c,_ as ae}from"./useServerDataTable-CyAAKgfs.js";import{_ as b}from"./index-C4qItS30.js";import{_ as $,a as F,b as T,c as P,d as A,e as B}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CRKjuGHD.js";import{_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-KgpCTNUL.js";import{E as se}from"./eye-DpXW5LCN.js";import{S as ne}from"./square-pen-Bq_BF5T8.js";import{P as re}from"./plus-BlhWpQ8-.js";import"./VisuallyHidden-DfpOj_YV.js";import"./useForwardExpose-BKx_IIGC.js";const oe={class:"space-y-6 p-6"},de={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ie={class:"flex items-center space-x-0 sm:space-x-3"},ue={key:0,class:"space-y-4"},ce={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},me={class:"flex items-start space-x-2"},pe={class:"text-sm text-red-700 dark:text-red-300"},ge={class:"text-xs"},fe={class:"text-xs"},ve={class:"text-xs"},_e={class:"space-y-4"},be={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},he={class:"flex items-start space-x-2"},xe={class:"text-sm text-red-700 dark:text-red-300"},ke={class:"max-h-32 overflow-y-auto text-sm text-gray-600 dark:text-gray-400"},we={class:"mt-1 space-y-1"},Ie=Q({__name:"Index",props:{knowledge_sharing:{}},setup(I){const g=I,E=[{title:"Knowledge Sharing",href:m("knowledge-management.index")}],{handleSearch:V,handleSort:K,handlePageChange:M,handleFilter:N,clearFilters:R,refresh:w,loading:j}=te({baseRoute:m("knowledge-management.index"),defaultSort:{field:"date_shared",order:"desc"},defaultPerPage:10}),C=_([]),i=_(null),f=_(!1),v=_(!1),u=_([]),y=W({}),L=S(()=>[o("id","ID",{sortable:!0,searchable:!1}),o("document_title","Document Title",{sortable:!0,searchable:!0}),o("document_type","Type",{sortable:!0,searchable:!0}),o("document_category","Category",{sortable:!1,searchable:!1}),o("employee.full_name","Employee",{sortable:!0,searchable:!0,render:(s,e)=>e.employee?.full_name??""}),o("employee.position","Position",{sortable:!1,searchable:!1,render:(s,e)=>e.employee?.position??""}),o("employee.department","Department",{sortable:!1,searchable:!1,render:(s,e)=>e.employee?.department??""}),o("link","Link",{sortable:!1,searchable:!0,render:(s,e)=>s?`<a href="${s}" target="_blank" class="text-blue-600 hover:underline flex items-center gap-1">
                     <span>View</span>
                     <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                     </svg>
                   </a>`:"<span class='text-gray-400'>No link</span>"}),o("formatted_date","Date Shared",{sortable:!0,searchable:!1}),o("time_since_shared","Time Since",{sortable:!1,searchable:!1}),o("sharing_year","Year",{sortable:!0,searchable:!1}),o("created_at","Created At",{sortable:!1,searchable:!1}),o("updated_at","Updated At",{sortable:!1,searchable:!1})]),U=S(()=>[{label:"View",icon:se,variant:"outline",tooltip:"View knowledge sharing",onClick:s=>h.visit(m("knowledge-management.show",s.id))},{label:"Edit",icon:ne,variant:"outline",tooltip:"Edit knowledge sharing",onClick:s=>h.visit(m("knowledge-management.edit",s.id)),class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{label:"Delete",icon:c,variant:"destructive",tooltip:"Delete knowledge sharing",onClick:s=>O(s.id),class:"text-red-600 hover:text-red-700"}]),q=S(()=>[{label:"Delete Selected",action:"delete",icon:c,variant:"destructive"}]);function O(s){const e=g.knowledge_sharing.data.find(r=>r.id===s);e&&(i.value=e,f.value=!0)}const z=()=>{C.value=[],w()},H=()=>{R(),C.value=[]};function Y(){i.value&&y.delete(m("knowledge-management.destroy",i.value.id),{preserveScroll:!0,onSuccess:()=>{f.value=!1,i.value=null,w()}})}function G(){u.value.length!==0&&h.post(m("knowledge-management.bulk-destroy"),{ids:u.value.map(s=>s.id)},{preserveScroll:!0,onSuccess:()=>{v.value=!1,u.value=[],w()}})}const J=s=>{u.value=s.selectedRows,s.action==="delete"&&(v.value=!0)};return(s,e)=>(k(),x(D,null,[l(t(X),{title:"Knowledge Sharing Management"}),l(le,{breadcrumbs:E},{default:n(()=>[a("div",oe,[a("div",de,[e[6]||(e[6]=a("div",null,[a("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Knowledge Sharing "),a("p",{class:"text-gray-600 dark:text-gray-400"}," Manage organization knowledge sharing and documentation. ")],-1)),a("div",ie,[l(t(b),{onClick:e[0]||(e[0]=r=>t(h).visit(t(m)("knowledge-management.create"))),class:"flex w-full cursor-pointer items-center justify-center space-x-2 sm:w-auto"},{default:n(()=>[l(t(re),{class:"h-4 w-4"}),e[5]||(e[5]=a("span",null,"Share Knowledge",-1))]),_:1})])]),a("div",null,[l(ae,{data:g.knowledge_sharing.data,columns:L.value,actions:U.value,"bulk-actions":q.value,"total-records":g.knowledge_sharing.meta.total,"current-page":g.knowledge_sharing.meta.current_page,loading:t(j),"default-rows-per-page":g.knowledge_sharing.meta.per_page,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:t(V),onSort:t(K),onPageChange:t(M),onFilter:t(N),onClearFilters:H,onRefresh:z,onBulkAction:J},null,8,["data","columns","actions","bulk-actions","total-records","current-page","loading","default-rows-per-page","onSearch","onSort","onPageChange","onFilter"])]),a("div",null,[l(t($),{open:f.value,"onUpdate:open":e[2]||(e[2]=r=>f.value=r)},{default:n(()=>[l(t(F),{class:"sm:max-w-md"},{default:n(()=>[l(t(T),null,{default:n(()=>[l(t(P),{class:"flex items-center space-x-2"},{default:n(()=>[l(t(c),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=a("span",null,"Delete Knowledge Sharing",-1))]),_:1}),l(t(A),null,{default:n(()=>[...e[8]||(e[8]=[p(" Are you sure you want to delete this knowledge sharing item? This action cannot be undone. ",-1)])]),_:1})]),_:1}),i.value?(k(),x("div",ue,[a("div",ce,[a("div",me,[l(t(c),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),a("div",pe,[a("strong",null,d(i.value.document_title),1),e[9]||(e[9]=a("br",null,null,-1)),a("span",ge,"Employee: "+d(i.value.employee?.full_name),1),e[10]||(e[10]=a("br",null,null,-1)),a("span",fe,"Type: "+d(i.value.document_type),1),e[11]||(e[11]=a("br",null,null,-1)),a("span",ve,"Date: "+d(i.value.formatted_date),1)])])])])):Z("",!0),l(t(B),{class:"space-x-2"},{default:n(()=>[l(t(b),{variant:"outline",onClick:e[1]||(e[1]=r=>f.value=!1),class:"cursor-pointer"},{default:n(()=>[...e[12]||(e[12]=[p("Cancel",-1)])]),_:1}),l(t(b),{variant:"destructive",onClick:Y,loading:t(y).processing,class:"cursor-pointer"},{default:n(()=>[l(t(c),{class:"mr-2 h-4 w-4"}),e[13]||(e[13]=p(" Delete Item ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),l(t($),{open:v.value,"onUpdate:open":e[4]||(e[4]=r=>v.value=r)},{default:n(()=>[l(t(F),{class:"sm:max-w-lg"},{default:n(()=>[l(t(T),null,{default:n(()=>[l(t(P),{class:"flex items-center space-x-2"},{default:n(()=>[l(t(c),{class:"h-5 w-5 text-red-500"}),e[14]||(e[14]=a("span",null,"Delete Multiple Knowledge Sharing Items",-1))]),_:1}),l(t(A),null,{default:n(()=>[p(" Are you sure you want to delete "+d(u.value.length)+" selected knowledge sharing items? This action cannot be undone. ",1)]),_:1})]),_:1}),a("div",_e,[a("div",be,[a("div",he,[l(t(c),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),a("div",xe,[a("strong",null,d(u.value.length)+" knowledge sharing items",1),e[15]||(e[15]=p(" will be permanently deleted. ",-1))])])]),a("div",ke,[e[16]||(e[16]=a("strong",null,"Items to be deleted:",-1)),a("ul",we,[(k(!0),x(D,null,ee(u.value,r=>(k(),x("li",{key:r.id}," â€¢ "+d(r.document_title)+" ("+d(r.employee?.full_name)+", "+d(r.document_type)+") ",1))),128))])])]),l(t(B),{class:"space-x-2"},{default:n(()=>[l(t(b),{variant:"outline",onClick:e[3]||(e[3]=r=>v.value=!1),class:"cursor-pointer"},{default:n(()=>[...e[17]||(e[17]=[p("Cancel",-1)])]),_:1}),l(t(b),{variant:"destructive",onClick:G,loading:t(y).processing,class:"cursor-pointer"},{default:n(()=>[l(t(c),{class:"mr-2 h-4 w-4"}),p(" Delete All ("+d(u.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1})],64))}});export{Ie as default};
