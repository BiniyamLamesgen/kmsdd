import{d as S,s as w,p as V,u as j,c as m,o as p,a as s,b as e,h as A,w as o,e as a,f as d,g as h,i as g,n as x,t as c,F as B,k as N}from"./app-BtxNwyw2.js";import{_ as k}from"./index-jPyfy9EI.js";import{_ as P,a as R,b as M,c as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-FN0ZLx45.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-kVO9wE2d.js";import{_ as f,a as _}from"./Label.vue_vue_type_script_setup_true_lang-C-ig4YK4.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-CXKSQ9h2.js";import{A as q}from"./arrow-left-CdviPf8L.js";import{S as J}from"./star-DRcTtEfk.js";import{C as T}from"./cloud-upload-B7CD2cz6.js";import{o as W,s as v,a as H}from"./types-D45As3cg.js";import"./useForwardExpose-AmO87qx4.js";import"./VisuallyHidden-DfHmtx4U.js";const K={class:"max-w-6xl space-y-6 p-4 sm:p-6 lg:p-8"},Q={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},X={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},Y={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 lg:gap-6"},Z={class:"space-y-2"},ee={key:0,class:"text-sm text-red-600"},te={class:"space-y-2"},le={key:0,class:"text-sm text-red-600"},se={class:"space-y-2"},ae={key:0,class:"text-sm text-red-600"},re={class:"space-y-2"},oe={key:0,class:"text-sm text-red-600"},ie={class:"space-y-2"},de={key:0,class:"text-sm text-red-600"},ne={class:"space-y-2"},me={key:0,class:"text-sm text-red-600"},pe={class:"mt-8 border-t pt-6"},ue={class:"space-y-4"},ge={key:0,class:"mb-4"},ce=["src"],fe={class:"text-center"},ye={class:"text-lg font-medium text-gray-700"},xe={key:0,class:"text-sm text-red-600"},_e={class:"flex flex-col items-center justify-end space-y-3 border-t pt-6 sm:flex-row sm:space-y-0 sm:space-x-4"},De=S({__name:"Edit",props:{gallery:{}},setup(U){const i=U,$=[{title:"Gallery",href:w("gallery.index")},{title:"Edit Image",href:""}],y=V(i.gallery.data.image?i.gallery.data.image:null),C=V(null),b=V(null),l=j({image:null,alt:i.gallery.data.alt??"",title:i.gallery.data.title??"",description:i.gallery.data.description??"",category:i.gallery.data.category??"",employee:i.gallery.data.employee??"",date:i.gallery.data.date??""}),D=W({image:H().refine(n=>n===null?!0:n instanceof File?["image/jpeg","image/png","image/jpg","image/gif","image/svg+xml"].includes(n.type):!1,{message:"The image field must be an image."}).optional(),alt:v().max(255).optional(),title:v().min(1,"Title is required").max(255),description:v().max(5e3).optional(),category:v().max(255).optional(),employee:v().max(255).optional(),date:v().optional()});function I(n){const t=n.target;if(b.value=null,t.files&&t.files[0]){const r=t.files[0];if(!r.type.startsWith("image/")){b.value="Only image files are allowed",l.image=null,y.value=null;return}l.image=r;const u=new FileReader;u.onload=G=>{y.value=G.target?.result},u.readAsDataURL(r)}else l.image=null,y.value=i.gallery.data.image?i.gallery.data.image:null}const F=()=>{const n=D.safeParse(l.data());if(l.errors={},!n.success){n.error.issues.forEach(r=>{r.path[0]&&(l.errors[r.path[0]]=r.message)});return}const t=new FormData;Object.entries(l.data()).forEach(([r,u])=>{r==="image"&&u instanceof File?t.append("image",u):r!=="image"&&u!==void 0&&u!==null&&t.append(r,u)}),l.post(w("gallery.update",i.gallery.data.id),t)},E=()=>{N.visit(w("gallery.index"))};return(n,t)=>(p(),m(B,null,[s(e(A),{title:"Edit Gallery Image"}),s(O,{breadcrumbs:$},{default:o(()=>[a("div",K,[a("div",Q,[a("div",X,[s(e(k),{variant:"outline",size:"sm",onClick:E,class:"w-fit cursor-pointer"},{default:o(()=>[s(e(q),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=d(" Back ",-1))]),_:1}),t[9]||(t[9]=a("div",null,[a("h1",{class:"text-2xl font-semibold text-gray-900 sm:text-3xl dark:text-gray-100"}," Edit Gallery Image "),a("p",{class:"text-sm text-gray-600 sm:text-base dark:text-gray-400"}," Update the gallery image details. ")],-1))])]),a("form",{onSubmit:h(F,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[s(e(P),null,{default:o(()=>[s(e(R),null,{default:o(()=>[s(e(M),{class:"flex items-center space-x-2"},{default:o(()=>[s(e(J),{class:"h-5 w-5"}),t[10]||(t[10]=a("span",null,"Image Information",-1))]),_:1}),s(e(L),null,{default:o(()=>[...t[11]||(t[11]=[d(" Edit the details for the gallery image. ",-1)])]),_:1})]),_:1}),s(e(z),null,{default:o(()=>[a("div",Y,[a("div",Z,[s(e(f),{for:"title"},{default:o(()=>[...t[12]||(t[12]=[d("Title *",-1)])]),_:1}),s(e(_),{id:"title",modelValue:e(l).title,"onUpdate:modelValue":t[0]||(t[0]=r=>e(l).title=r),placeholder:"Title",class:x([{"border-red-500":e(l).errors.title},"w-full"])},null,8,["modelValue","class"]),e(l).errors.title?(p(),m("p",ee,c(e(l).errors.title),1)):g("",!0)]),a("div",te,[s(e(f),{for:"description"},{default:o(()=>[...t[13]||(t[13]=[d("Description",-1)])]),_:1}),s(e(_),{id:"description",modelValue:e(l).description,"onUpdate:modelValue":t[1]||(t[1]=r=>e(l).description=r),placeholder:"Description",class:x([{"border-red-500":e(l).errors.description},"w-full"])},null,8,["modelValue","class"]),e(l).errors.description?(p(),m("p",le,c(e(l).errors.description),1)):g("",!0)]),a("div",se,[s(e(f),{for:"category"},{default:o(()=>[...t[14]||(t[14]=[d("Category",-1)])]),_:1}),s(e(_),{id:"category",modelValue:e(l).category,"onUpdate:modelValue":t[2]||(t[2]=r=>e(l).category=r),placeholder:"Category",class:x([{"border-red-500":e(l).errors.category},"w-full"])},null,8,["modelValue","class"]),e(l).errors.category?(p(),m("p",ae,c(e(l).errors.category),1)):g("",!0)]),a("div",re,[s(e(f),{for:"employee"},{default:o(()=>[...t[15]||(t[15]=[d("Employee",-1)])]),_:1}),s(e(_),{id:"employee",modelValue:e(l).employee,"onUpdate:modelValue":t[3]||(t[3]=r=>e(l).employee=r),placeholder:"Employee",class:x([{"border-red-500":e(l).errors.employee},"w-full"])},null,8,["modelValue","class"]),e(l).errors.employee?(p(),m("p",oe,c(e(l).errors.employee),1)):g("",!0)]),a("div",ie,[s(e(f),{for:"date"},{default:o(()=>[...t[16]||(t[16]=[d("Date",-1)])]),_:1}),s(e(_),{id:"date",type:"date",modelValue:e(l).date,"onUpdate:modelValue":t[4]||(t[4]=r=>e(l).date=r),class:x([{"border-red-500":e(l).errors.date},"w-full"])},null,8,["modelValue","class"]),e(l).errors.date?(p(),m("p",de,c(e(l).errors.date),1)):g("",!0)]),a("div",ne,[s(e(f),{for:"alt"},{default:o(()=>[...t[17]||(t[17]=[d("Alt Text",-1)])]),_:1}),s(e(_),{id:"alt",modelValue:e(l).alt,"onUpdate:modelValue":t[5]||(t[5]=r=>e(l).alt=r),placeholder:"Alt text",class:x([{"border-red-500":e(l).errors.alt},"w-full"])},null,8,["modelValue","class"]),e(l).errors.alt?(p(),m("p",me,c(e(l).errors.alt),1)):g("",!0)])]),a("div",pe,[a("div",ue,[s(e(f),null,{default:o(()=>[...t[18]||(t[18]=[d("Image File",-1)])]),_:1}),a("div",{onClick:t[6]||(t[6]=r=>C.value?.click()),onDragover:t[7]||(t[7]=h(()=>{},["prevent"])),onDrop:h(I,["prevent"]),class:"relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-400 transition-colors duration-200 bg-gray-50 hover:bg-blue-50 min-h-[120px] flex flex-col items-center justify-center"},[a("input",{ref_key:"imageInputRef",ref:C,type:"file",accept:"image/*",onChange:I,class:"hidden"},null,544),y.value?(p(),m("div",ge,[a("img",{src:y.value,alt:"Preview",class:"max-h-40 rounded border"},null,8,ce)])):g("",!0),a("div",fe,[a("p",ye,c(y.value?"Change Image":"Upload Image"),1),s(e(T),{class:"w-12 h-12 text-gray-400 mx-auto rotate-0 mb-2"}),t[19]||(t[19]=a("p",{class:"text-sm text-gray-500 mt-1"}," Drag and drop an image here, or click to select ",-1)),t[20]||(t[20]=a("p",{class:"text-xs text-gray-400 mt-1"}," Supports: JPG, PNG, GIF, SVG (Max: 2MB) ",-1))])],32),b.value||e(l).errors.image?(p(),m("p",xe,c(b.value||e(l).errors.image),1)):g("",!0)])])]),_:1})]),_:1}),a("div",_e,[s(e(k),{type:"button",variant:"outline",onClick:E,class:"order-2 w-full cursor-pointer sm:order-1 sm:w-auto"},{default:o(()=>[...t[21]||(t[21]=[d(" Cancel ",-1)])]),_:1}),s(e(k),{type:"submit",loading:e(l).processing,class:"order-1 w-full cursor-pointer sm:order-2 sm:w-auto"},{default:o(()=>[s(e(T),{class:"mr-2 h-4 w-4"}),t[22]||(t[22]=d(" Update Gallery ",-1))]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{De as default};
