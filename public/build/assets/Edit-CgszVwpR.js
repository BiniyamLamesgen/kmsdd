import{d as Y,s as _,u as C,l as h,m as U,c as f,o as m,a as i,b as e,h as F,w as d,e as a,f as l,g as N,i as p,n as y,t as u,j as T,F as k,r as j,v as B,k as S}from"./app-WCoSBNF8.js";import{_ as x}from"./index-gtYP4Z27.js";import{_ as I,a as M,b as z,c as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-CqPOizUP.js";import{_ as D}from"./CardDescription.vue_vue_type_script_setup_true_lang-BsvAwo7b.js";import{_ as c,a as b}from"./Label.vue_vue_type_script_setup_true_lang-DA93N1nt.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-BkSasf_i.js";import{A as L}from"./arrow-left-BmVZzzhP.js";import{S as q}from"./star-BalVDEFp.js";import{o as P,u as H,s as g,n as J}from"./types-D45As3cg.js";import"./useForwardExpose-j55gvhwt.js";import"./VisuallyHidden-CkRoF75v.js";const K={class:"mx-auto max-w-3xl space-y-6 p-6"},O={class:"flex items-center justify-between"},Q={class:"flex items-center space-x-4"},R={class:"space-y-2"},W={key:0,class:"text-sm text-red-600"},X={class:"space-y-2"},Z={key:0,class:"text-sm text-red-600"},ee={class:"space-y-2"},te={key:0,class:"text-sm text-red-600"},se={class:"space-y-2"},oe=["value"],ie={key:0,class:"text-sm text-red-600"},ae={class:"flex items-center justify-end space-x-4 border-t pt-6"},ge=Y({__name:"Edit",props:{education:{},employees:{}},setup(V){const n=V,E=[{title:"Education",href:_("educations.index")},{title:"Edit",href:""}],t=C({field_of_study:"",institution:"",graduation_year:"",employee_id:""});h(()=>{n.education&&(t.field_of_study=n.education.field_of_study??"",t.institution=n.education.institution??"",t.graduation_year=String(n.education.graduation_year??""),t.employee_id=String(n.education.employee_id??""))}),U(()=>n.education,r=>{r&&(t.field_of_study=r.field_of_study??"",t.institution=r.institution??"",t.graduation_year=String(r.graduation_year??""),t.employee_id=String(r.employee_id??""))});const $=P({field_of_study:g().max(255).optional(),institution:g().max(255).optional(),graduation_year:g().optional().refine(r=>!r||/^\d{4}$/.test(r),{message:"Graduation year must be a valid year (YYYY)"}),employee_id:H([g(),J()]).refine(r=>String(r).length>0,{message:"Employee is required"})}),w=()=>{const r=$.safeParse(t.data());if(t.errors={},!r.success){r.error.issues.forEach(o=>{o.path[0]&&(t.errors[o.path[0]]=o.message)});return}const s={...t.data(),employee_id:Number(t.employee_id)};t.post(_("educations.update",n.education.id),{...s,preserveScroll:!0,onSuccess:()=>S.visit(_("education.index")),onError:o=>console.log("Form errors:",o)})},v=()=>{S.visit(_("educations.index"))};return(r,s)=>(m(),f(k,null,[i(e(F),{title:"Edit Education"}),i(G,{breadcrumbs:E},{default:d(()=>[a("div",K,[a("div",O,[a("div",Q,[i(e(x),{variant:"outline",size:"sm",onClick:v,class:"cursor-pointer"},{default:d(()=>[i(e(L),{class:"mr-2 h-4 w-4"}),s[4]||(s[4]=l(" Back ",-1))]),_:1}),s[5]||(s[5]=a("div",null,[a("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Edit Education "),a("p",{class:"text-gray-600 dark:text-gray-400"}," Update education details like field, institution, year, and employee. ")],-1))])]),a("form",{onSubmit:N(w,["prevent"]),class:"space-y-6"},[i(e(I),null,{default:d(()=>[i(e(M),null,{default:d(()=>[i(e(z),{class:"flex items-center space-x-2"},{default:d(()=>[i(e(q),{class:"h-5 w-5"}),s[6]||(s[6]=a("span",null,"Education Information",-1))]),_:1}),i(e(D),null,{default:d(()=>[...s[7]||(s[7]=[l(" Update the fields below and click save. ",-1)])]),_:1})]),_:1}),i(e(A),{class:"space-y-4"},{default:d(()=>[a("div",R,[i(e(c),{for:"field_of_study"},{default:d(()=>[...s[8]||(s[8]=[l("Field of Study",-1)])]),_:1}),i(e(b),{id:"field_of_study",modelValue:e(t).field_of_study,"onUpdate:modelValue":s[0]||(s[0]=o=>e(t).field_of_study=o),placeholder:"Field of study",class:y({"border-red-500":e(t).errors.field_of_study})},null,8,["modelValue","class"]),e(t).errors.field_of_study?(m(),f("p",W,u(e(t).errors.field_of_study),1)):p("",!0)]),a("div",X,[i(e(c),{for:"institution"},{default:d(()=>[...s[9]||(s[9]=[l("Institution",-1)])]),_:1}),i(e(b),{id:"institution",modelValue:e(t).institution,"onUpdate:modelValue":s[1]||(s[1]=o=>e(t).institution=o),placeholder:"Institution",class:y({"border-red-500":e(t).errors.institution})},null,8,["modelValue","class"]),e(t).errors.institution?(m(),f("p",Z,u(e(t).errors.institution),1)):p("",!0)]),a("div",ee,[i(e(c),{for:"graduation_year"},{default:d(()=>[...s[10]||(s[10]=[l("Graduation Year",-1)])]),_:1}),i(e(b),{id:"graduation_year",modelValue:e(t).graduation_year,"onUpdate:modelValue":s[2]||(s[2]=o=>e(t).graduation_year=o),placeholder:"YYYY",class:y({"border-red-500":e(t).errors.graduation_year})},null,8,["modelValue","class"]),e(t).errors.graduation_year?(m(),f("p",te,u(e(t).errors.graduation_year),1)):p("",!0)]),a("div",se,[i(e(c),{for:"employee_id"},{default:d(()=>[...s[11]||(s[11]=[l("Employee *",-1)])]),_:1}),T(a("select",{id:"employee_id","onUpdate:modelValue":s[3]||(s[3]=o=>e(t).employee_id=o),class:y(["w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",{"border-red-500":e(t).errors.employee_id}])},[s[12]||(s[12]=a("option",{value:"",disabled:""}," Select employee ",-1)),(m(!0),f(k,null,j(n.employees,o=>(m(),f("option",{key:o.id,value:o.id},u(o.first_name)+" "+u(o.last_name)+" ("+u(o.position)+", "+u(o.department)+") ",9,oe))),128))],2),[[B,e(t).employee_id]]),e(t).errors.employee_id?(m(),f("p",ie,u(e(t).errors.employee_id),1)):p("",!0)])]),_:1})]),_:1}),a("div",ae,[i(e(x),{type:"button",variant:"outline",onClick:v,class:"cursor-pointer"},{default:d(()=>[...s[13]||(s[13]=[l(" Cancel ",-1)])]),_:1}),i(e(x),{type:"submit",loading:e(t).processing,class:"cursor-pointer"},{default:d(()=>[...s[14]||(s[14]=[l(" Update Education ",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{ge as default};
