import{d as M,s as p,u as J,p as I,q as O,c as n,o as d,a as i,b as s,h as Y,w as l,e as r,f as m,g as P,j as q,i as g,n as _,F as z,r as Q,t as c,v as X,k as j}from"./app-CZ_92QqR.js";import{F as K,I as ee,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-T57IkxQE.js";import{_ as v}from"./index-CTru82cN.js";import{_ as b,a as C}from"./Label.vue_vue_type_script_setup_true_lang-B7j9Y3LL.js";import{_ as D,a as S,b as Z,c as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-DfGcf0Z4.js";import{_ as G}from"./CardDescription.vue_vue_type_script_setup_true_lang-CKXr_5eH.js";import{A as te}from"./arrow-left-B3JA7Mme.js";import{A as re}from"./award-Bp2GVJug.js";import{U as ie}from"./upload-COvixju-.js";import{C as ae}from"./check-BwSrFrYc.js";import{o as oe,s as w,u as le,n as ne}from"./types-D45As3cg.js";import"./useForwardExpose-4i7abMob.js";import"./VisuallyHidden-pKzkU6Eb.js";const de={class:"mx-auto max-w-6xl space-y-6 p-4 sm:p-6 lg:p-8"},me={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ue={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},ge={class:"grid grid-cols-1 gap-6 lg:gap-8 xl:grid-cols-2"},ce={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 lg:gap-6"},fe={class:"space-y-2"},pe=["value"],_e={key:0,class:"text-sm text-red-600"},ye={class:"space-y-2"},xe={key:0,class:"text-sm text-red-600"},ve={class:"space-y-2"},be={key:0,class:"text-sm text-red-600"},we={class:"space-y-2"},ke={key:0,class:"text-sm text-red-600"},Ie={class:"flex flex-col md:flex-row gap-6"},Ce={class:"flex-1"},he={class:"flex flex-col items-center justify-center py-4 text-gray-500 dark:text-gray-400"},Pe={key:0,class:"mb-3"},ze={key:1,class:"w-full"},je={class:"flex items-center justify-center mb-3"},De={key:0,class:"w-full md:w-1/3 lg:w-1/4"},Se={class:"rounded-lg border overflow-hidden bg-gray-50 dark:bg-gray-900"},Ze={class:"p-2 bg-gray-100 dark:bg-gray-800 border-b text-xs font-medium text-gray-700 dark:text-gray-300 flex items-center"},Be={class:"p-3 flex items-center justify-center"},Ge=["src"],Ve={key:0,class:"mt-1 text-sm text-red-600"},We={class:"flex flex-col items-center justify-end space-y-3 border-t pt-6 sm:flex-row sm:space-y-0 sm:space-x-4"},Ye=M({__name:"Create",props:{employees:{}},setup(V){const W=V,A=[{title:"Certifications",href:p("certifications.index")},{title:"Create Certification",href:p("certifications.create")}],t=J({employee_id:"",certification_name:"",issuing_organization:"",issue_date:"",image:null}),f=I(null),u=I(null),y=I(!1),F=oe({employee_id:le([w(),ne()]).refine(a=>String(a).length>0,{message:"Employee is required"}),certification_name:w().min(1,"Certification name is required").max(255),issuing_organization:w().min(1,"Issuing organization is required").max(255),issue_date:w().optional()}),T=()=>{f.value&&f.value.click()},E=a=>{const e=a.target;if(!e.files?.length)return;const o=e.files[0];if(!o)return;if(t.errors.image=void 0,!["image/jpeg","image/jpg","image/png","image/gif"].includes(o.type.toLowerCase())){t.errors.image="Please upload a valid image file (JPEG, PNG, or GIF)";return}if(o.size>2*1024*1024){t.errors.image="Image must be less than 2MB";return}t.image=o;const x=new FileReader;x.onload=H=>{u.value=H.target?.result},x.readAsDataURL(o)},L=a=>{if(a.preventDefault(),a.stopPropagation(),y.value=!1,!a.dataTransfer?.files.length)return;const e=a.dataTransfer.files[0];if(!e)return;if(t.errors.image=void 0,!["image/jpeg","image/jpg","image/png","image/gif"].includes(e.type.toLowerCase())){t.errors.image="Please upload a valid image file (JPEG, PNG, or GIF)";return}if(e.size>2*1024*1024){t.errors.image="Image must be less than 2MB";return}t.image=e;const k=new FileReader;k.onload=x=>{u.value=x.target?.result},k.readAsDataURL(e)},N=a=>{a.preventDefault(),a.stopPropagation(),y.value=!0},U=a=>{a.preventDefault(),a.stopPropagation(),y.value=!1},$=a=>{a.stopPropagation(),t.image=null,u.value=null,f.value&&(f.value.value="")},R=()=>{const a=F.safeParse({employee_id:t.employee_id,certification_name:t.certification_name,issuing_organization:t.issuing_organization,issue_date:t.issue_date});if(t.errors={},!a.success){a.error.issues.forEach(e=>{e.path[0]&&(t.errors[e.path[0]]=e.message)});return}t.post(p("certifications.store"),{onSuccess:()=>{j.visit(p("certifications.index"))},onError:()=>{},preserveScroll:!0})},h=()=>{j.visit(p("certifications.index"))};return O(()=>t.employee_id!==""||t.certification_name!==""||t.issuing_organization!==""||t.issue_date!==""||t.image!==null),(a,e)=>(d(),n(z,null,[i(s(Y),{title:"Create Certification"}),i(se,{breadcrumbs:A},{default:l(()=>[r("div",de,[r("div",me,[r("div",ue,[i(s(v),{variant:"outline",size:"sm",onClick:h,class:"w-fit cursor-pointer"},{default:l(()=>[i(s(te),{class:"mr-2 h-4 w-4"}),e[5]||(e[5]=m(" Back ",-1))]),_:1}),e[6]||(e[6]=r("div",null,[r("h1",{class:"text-2xl font-semibold text-gray-900 sm:text-3xl dark:text-gray-100"}," Create Certification "),r("p",{class:"text-sm text-gray-600 sm:text-base dark:text-gray-400"}," Add a new certification record to your organization. ")],-1))])]),r("form",{onSubmit:P(R,["prevent"]),class:"space-y-6"},[r("div",ge,[i(s(D),{class:"xl:col-span-2"},{default:l(()=>[i(s(S),null,{default:l(()=>[i(s(Z),{class:"flex items-center space-x-2"},{default:l(()=>[i(s(re),{class:"h-5 w-5"}),e[7]||(e[7]=r("span",null,"Certification Information",-1))]),_:1}),i(s(G),null,{default:l(()=>[...e[8]||(e[8]=[m(" Enter the details for the new certification record. ",-1)])]),_:1})]),_:1}),i(s(B),null,{default:l(()=>[r("div",ce,[r("div",fe,[i(s(b),{for:"employee_id"},{default:l(()=>[...e[9]||(e[9]=[m("Employee *",-1)])]),_:1}),q(r("select",{id:"employee_id","onUpdate:modelValue":e[0]||(e[0]=o=>s(t).employee_id=o),class:_(["w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",{"border-red-500":s(t).errors.employee_id}])},[e[10]||(e[10]=r("option",{value:"",disabled:""}," Select employee ",-1)),(d(!0),n(z,null,Q(W.employees,o=>(d(),n("option",{key:o.id,value:o.id},c(o.name),9,pe))),128))],2),[[X,s(t).employee_id]]),s(t).errors.employee_id?(d(),n("p",_e,c(s(t).errors.employee_id),1)):g("",!0)]),r("div",ye,[i(s(b),{for:"certification_name"},{default:l(()=>[...e[11]||(e[11]=[m("Certification Name *",-1)])]),_:1}),i(s(C),{id:"certification_name",modelValue:s(t).certification_name,"onUpdate:modelValue":e[1]||(e[1]=o=>s(t).certification_name=o),placeholder:"e.g. AWS Certified Solutions Architect",class:_([{"border-red-500":s(t).errors.certification_name},"w-full"])},null,8,["modelValue","class"]),s(t).errors.certification_name?(d(),n("p",xe,c(s(t).errors.certification_name),1)):g("",!0)]),r("div",ve,[i(s(b),{for:"issuing_organization"},{default:l(()=>[...e[12]||(e[12]=[m("Issuing Organization *",-1)])]),_:1}),i(s(C),{id:"issuing_organization",modelValue:s(t).issuing_organization,"onUpdate:modelValue":e[2]||(e[2]=o=>s(t).issuing_organization=o),placeholder:"e.g. Amazon Web Services",class:_([{"border-red-500":s(t).errors.issuing_organization},"w-full"])},null,8,["modelValue","class"]),s(t).errors.issuing_organization?(d(),n("p",be,c(s(t).errors.issuing_organization),1)):g("",!0)]),r("div",we,[i(s(b),{for:"issue_date"},{default:l(()=>[...e[13]||(e[13]=[m("Issue Date",-1)])]),_:1}),i(s(C),{id:"issue_date",modelValue:s(t).issue_date,"onUpdate:modelValue":e[3]||(e[3]=o=>s(t).issue_date=o),type:"date",class:_([{"border-red-500":s(t).errors.issue_date},"w-full"])},null,8,["modelValue","class"]),s(t).errors.issue_date?(d(),n("p",ke,c(s(t).errors.issue_date),1)):g("",!0)])])]),_:1})]),_:1}),i(s(D),{class:"xl:col-span-2"},{default:l(()=>[i(s(S),null,{default:l(()=>[i(s(Z),{class:"flex items-center space-x-2"},{default:l(()=>[i(s(K),{class:"h-5 w-5"}),e[14]||(e[14]=r("span",null,"Certificate Image",-1))]),_:1}),i(s(G),null,{default:l(()=>[...e[15]||(e[15]=[m(" Upload an image of the certification document (optional). ",-1)])]),_:1})]),_:1}),i(s(B),null,{default:l(()=>[r("div",Ie,[r("div",Ce,[r("input",{id:"image",ref_key:"fileInput",ref:f,type:"file",class:"hidden",accept:"image/*",onChange:E},null,544),r("div",{class:_(["border-2 border-dashed rounded-lg p-6 transition-all cursor-pointer text-center",y.value?"border-primary bg-primary/5 dark:border-primary/70 dark:bg-primary/10":"border-gray-300 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-900/50",u.value?"border-green-300 bg-green-50 dark:border-green-800 dark:bg-green-900/20":""]),onClick:T,onDragover:N,onDragleave:U,onDrop:L},[r("div",he,[u.value?(d(),n("div",ze,[r("div",je,[i(s(ae),{class:"h-6 w-6 text-green-500"}),e[19]||(e[19]=r("span",{class:"ml-2 text-green-600 dark:text-green-400 font-medium"},"Image uploaded successfully",-1))]),e[21]||(e[21]=r("p",{class:"text-xs"},"Click or drag another file to replace",-1)),i(s(v),{type:"button",variant:"outline",size:"sm",class:"mt-3 cursor-pointer text-red-600 border-red-200 hover:border-red-300 hover:bg-red-50",onClick:P($,["stop"])},{default:l(()=>[...e[20]||(e[20]=[m(" Remove Image ",-1)])]),_:1})])):(d(),n("div",Pe,[i(s(ie),{class:"h-10 w-10 mb-2 mx-auto text-gray-400"}),e[16]||(e[16]=r("p",{class:"text-sm font-medium"},"Drag and drop your certificate image here",-1)),e[17]||(e[17]=r("p",{class:"text-xs mt-1"},"or click to browse files",-1)),e[18]||(e[18]=r("p",{class:"text-xs mt-3 text-gray-400"},"PNG, JPG or JPEG (max 2MB)",-1))]))])],34)]),u.value?(d(),n("div",De,[r("div",Se,[r("div",Ze,[i(s(ee),{class:"inline h-3 w-3 mr-1"}),e[22]||(e[22]=r("span",null,"Certificate Preview",-1))]),r("div",Be,[r("img",{src:u.value,alt:"Certificate Preview",class:"max-w-full max-h-48 object-contain rounded",onError:e[4]||(e[4]=o=>{o.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjZjVmNWY1IiAvPjx0ZXh0IHg9IjQwIiB5PSI0MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBhbGlnbm1lbnQtYmFzZWxpbmU9Im1pZGRsZSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pjwvc3ZnPg=="})},null,40,Ge)])])])):g("",!0)]),s(t).errors.image?(d(),n("p",Ve,c(s(t).errors.image),1)):g("",!0)]),_:1})]),_:1})]),r("div",We,[i(s(v),{type:"button",variant:"outline",onClick:h,class:"order-2 w-full cursor-pointer sm:order-1 sm:w-auto"},{default:l(()=>[...e[23]||(e[23]=[m(" Cancel ",-1)])]),_:1}),i(s(v),{type:"submit",loading:s(t).processing,class:"order-1 w-full cursor-pointer sm:order-2 sm:w-auto"},{default:l(()=>[...e[24]||(e[24]=[m(" Create Certification ",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{Ye as default};
