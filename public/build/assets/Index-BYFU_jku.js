import{d as W,s as p,p as x,u as X,q as w,k as g,c as h,o as j,a as l,b as t,h as Y,w as r,e as s,i as Z,f as m,t as d,F as D,r as ee}from"./app-CZ_92QqR.js";import{u as te,c as o,T as c,_ as se}from"./useServerDataTable-NCLCFBSb.js";import{_}from"./index-CTru82cN.js";import{_ as P,a as S,b as $,c as F,d as A,e as E}from"./DialogTitle.vue_vue_type_script_setup_true_lang-5Sa-XXAZ.js";import{_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-T57IkxQE.js";import{E as ae}from"./eye-BvfQvPh6.js";import{S as re}from"./square-pen-C2muAAH8.js";import{P as oe}from"./plus-Y4C7Mf4N.js";import"./VisuallyHidden-pKzkU6Eb.js";import"./useForwardExpose-4i7abMob.js";const ne={class:"space-y-6 p-6"},de={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ie={class:"flex items-center space-x-0 sm:space-x-3"},ue={key:0,class:"space-y-4"},ce={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},pe={class:"flex items-start space-x-2"},me={class:"text-sm text-red-700 dark:text-red-300"},fe={class:"text-xs"},be={class:"text-xs"},ve={class:"text-xs"},xe={class:"space-y-4"},_e={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},ge={class:"flex items-start space-x-2"},he={class:"text-sm text-red-700 dark:text-red-300"},je={class:"max-h-32 overflow-y-auto text-sm text-gray-600 dark:text-gray-400"},ye={class:"mt-1 space-y-1"},Be=W({__name:"Index",props:{projects:{}},setup(B){const f=B,T=[{title:"Projects",href:p("projects.index")}],{handleSearch:I,handleSort:R,handlePageChange:V,handleFilter:N,clearFilters:O,refresh:y,loading:M}=te({baseRoute:p("projects.index"),defaultSort:{field:"project_name",order:"asc"},defaultPerPage:10}),C=x([]),i=x(null),b=x(!1),v=x(!1),u=x([]),k=X({}),U=w(()=>[o("id","ID",{sortable:!0,searchable:!1}),o("project_name","Project Name",{sortable:!0,searchable:!0}),o("description","Description",{sortable:!1,searchable:!0,render:a=>a?.slice(0,60)+(a?.length>60?"...":"")}),o("role","Role",{sortable:!0,searchable:!0}),o("employee.full_name","Employee",{sortable:!0,searchable:!0,render:(a,e)=>e.employee?.full_name??""}),o("employee.position","Position",{sortable:!1,searchable:!1,render:(a,e)=>e.employee?.position??""}),o("employee.department","Department",{sortable:!1,searchable:!1,render:(a,e)=>e.employee?.department??""}),o("start_date","Start Date",{sortable:!0,searchable:!1}),o("end_date","End Date",{sortable:!0,searchable:!1,render:a=>a??"Ongoing"}),o("duration","Duration",{sortable:!1,searchable:!1}),o("status","Status",{sortable:!0,searchable:!0,render:a=>a==="Completed"?'<span class="text-green-600 font-semibold">Completed</span>':'<span class="text-yellow-600 font-semibold">In Progress</span>'}),o("outcome","Outcome",{sortable:!1,searchable:!0,render:a=>a??"-"}),o("created_at","Created At",{sortable:!1,searchable:!1}),o("updated_at","Updated At",{sortable:!1,searchable:!1})]),q=w(()=>[{label:"View",icon:ae,variant:"outline",tooltip:"View project",onClick:a=>g.visit(p("projects.show",a.id))},{label:"Edit",icon:re,variant:"outline",tooltip:"Edit project",onClick:a=>g.visit(p("projects.edit",a.id)),class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{label:"Delete",icon:c,variant:"destructive",tooltip:"Delete project",onClick:a=>L(a.id),class:"text-red-600 hover:text-red-700"}]),z=w(()=>[{label:"Delete Selected",action:"delete",icon:c,variant:"destructive"}]);function L(a){const e=f.projects.data.find(n=>n.id===a);e&&(i.value=e,b.value=!0)}const G=()=>{C.value=[],y()},H=()=>{O(),C.value=[]};function J(){i.value&&k.delete(p("projects.destroy",i.value.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1,i.value=null,y()}})}function K(){u.value.length!==0&&g.post(p("projects.bulk-destroy"),{ids:u.value.map(a=>a.id)},{preserveScroll:!0,onSuccess:()=>{v.value=!1,u.value=[],y()}})}const Q=a=>{u.value=a.selectedRows,a.action==="delete"&&(v.value=!0)};return(a,e)=>(j(),h(D,null,[l(t(Y),{title:"Projects Management"}),l(le,{breadcrumbs:T},{default:r(()=>[s("div",ne,[s("div",de,[e[6]||(e[6]=s("div",null,[s("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Projects "),s("p",{class:"text-gray-600 dark:text-gray-400"}," Manage organization projects and assignments. ")],-1)),s("div",ie,[l(t(_),{onClick:e[0]||(e[0]=n=>t(g).visit(t(p)("projects.create"))),class:"flex w-full cursor-pointer items-center justify-center space-x-2 sm:w-auto"},{default:r(()=>[l(t(oe),{class:"h-4 w-4"}),e[5]||(e[5]=s("span",null,"Create Project",-1))]),_:1})])]),s("div",null,[l(se,{data:f.projects.data,columns:U.value,actions:q.value,"bulk-actions":z.value,"total-records":f.projects.meta.total,"current-page":f.projects.meta.current_page,loading:t(M),"default-rows-per-page":f.projects.meta.per_page,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:t(I),onSort:t(R),onPageChange:t(V),onFilter:t(N),onClearFilters:H,onRefresh:G,onBulkAction:Q},null,8,["data","columns","actions","bulk-actions","total-records","current-page","loading","default-rows-per-page","onSearch","onSort","onPageChange","onFilter"])]),s("div",null,[l(t(P),{open:b.value,"onUpdate:open":e[2]||(e[2]=n=>b.value=n)},{default:r(()=>[l(t(S),{class:"sm:max-w-md"},{default:r(()=>[l(t($),null,{default:r(()=>[l(t(F),{class:"flex items-center space-x-2"},{default:r(()=>[l(t(c),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=s("span",null,"Delete Project",-1))]),_:1}),l(t(A),null,{default:r(()=>[...e[8]||(e[8]=[m(" Are you sure you want to delete this project? This action cannot be undone. ",-1)])]),_:1})]),_:1}),i.value?(j(),h("div",ue,[s("div",ce,[s("div",pe,[l(t(c),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),s("div",me,[s("strong",null,d(i.value.project_name),1),e[9]||(e[9]=s("br",null,null,-1)),s("span",fe,"Employee: "+d(i.value.employee?.full_name),1),e[10]||(e[10]=s("br",null,null,-1)),s("span",be,"Role: "+d(i.value.role),1),e[11]||(e[11]=s("br",null,null,-1)),s("span",ve,"Status: "+d(i.value.status),1)])])])])):Z("",!0),l(t(E),{class:"space-x-2"},{default:r(()=>[l(t(_),{variant:"outline",onClick:e[1]||(e[1]=n=>b.value=!1),class:"cursor-pointer"},{default:r(()=>[...e[12]||(e[12]=[m("Cancel",-1)])]),_:1}),l(t(_),{variant:"destructive",onClick:J,loading:t(k).processing,class:"cursor-pointer"},{default:r(()=>[l(t(c),{class:"mr-2 h-4 w-4"}),e[13]||(e[13]=m(" Delete Project ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),l(t(P),{open:v.value,"onUpdate:open":e[4]||(e[4]=n=>v.value=n)},{default:r(()=>[l(t(S),{class:"sm:max-w-lg"},{default:r(()=>[l(t($),null,{default:r(()=>[l(t(F),{class:"flex items-center space-x-2"},{default:r(()=>[l(t(c),{class:"h-5 w-5 text-red-500"}),e[14]||(e[14]=s("span",null,"Delete Multiple Projects",-1))]),_:1}),l(t(A),null,{default:r(()=>[m(" Are you sure you want to delete "+d(u.value.length)+" selected projects? This action cannot be undone. ",1)]),_:1})]),_:1}),s("div",xe,[s("div",_e,[s("div",ge,[l(t(c),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),s("div",he,[s("strong",null,d(u.value.length)+" projects",1),e[15]||(e[15]=m(" will be permanently deleted. ",-1))])])]),s("div",je,[e[16]||(e[16]=s("strong",null,"Projects to be deleted:",-1)),s("ul",ye,[(j(!0),h(D,null,ee(u.value,n=>(j(),h("li",{key:n.id}," â€¢ "+d(n.project_name)+" ("+d(n.employee?.full_name)+", "+d(n.role)+") ",1))),128))])])]),l(t(E),{class:"space-x-2"},{default:r(()=>[l(t(_),{variant:"outline",onClick:e[3]||(e[3]=n=>v.value=!1),class:"cursor-pointer"},{default:r(()=>[...e[17]||(e[17]=[m("Cancel",-1)])]),_:1}),l(t(_),{variant:"destructive",onClick:K,loading:t(k).processing,class:"cursor-pointer"},{default:r(()=>[l(t(c),{class:"mr-2 h-4 w-4"}),m(" Delete All ("+d(u.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1})],64))}});export{Be as default};
