import{C as S,c,u as G,_ as H,T as u}from"./useServerDataTable-CyAAKgfs.js";import{_ as k}from"./index-C4qItS30.js";import{_ as C,a as D,b as $,c as E,d as F,e as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CRKjuGHD.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-KgpCTNUL.js";import{d as K,s as f,p as g,u as Q,c as _,o as y,a as s,b as l,h as W,w as o,e as a,k as x,i as X,f as n,t as m,F as B,r as Y}from"./app-B8cnIyhQ.js";import{P as Z}from"./plus-BlhWpQ8-.js";import{E as ee}from"./eye-DpXW5LCN.js";import{S as le}from"./square-pen-Bq_BF5T8.js";import"./VisuallyHidden-DfpOj_YV.js";import"./useForwardExpose-BKx_IIGC.js";const te={class:"space-y-6 p-6"},se={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ae={class:"flex justify-end"},oe={key:0,class:"space-y-4"},re={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},ne={class:"flex items-start space-x-2"},ie={class:"text-sm text-red-700 dark:text-red-300"},de={class:"space-y-4"},ue={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},me={class:"flex items-start space-x-2"},pe={class:"text-sm text-red-700 dark:text-red-300"},ce={class:"max-h-32 overflow-y-auto"},fe={class:"text-sm text-gray-600 dark:text-gray-400"},ve={class:"mt-1 space-y-1"},$e=K({__name:"Index",props:{employeeSkills:{}},setup(ke){const w=[S.id(),c("employee","Employee",{sortable:!0,searchable:!0,render:t=>t?.full_name??"-"}),c("employee","Position",{sortable:!0,searchable:!0,render:t=>t?.position??"-"}),c("employee","Department",{sortable:!0,searchable:!0,render:t=>t?.department??"-"}),c("skill","Skill",{sortable:!0,searchable:!0,render:t=>t?.skill_name??"-"}),c("proficiency_level","Proficiency",{sortable:!0,searchable:!0,render:(t,e)=>`${e.proficiency_badge??""} ${e.proficiency_level??"-"}`}),c("endorsements_count","Endorsements",{sortable:!0,render:(t,e)=>e?`${e.endorsements_count??0} (${e.endorsement_status??"-"})`:"-"}),S.createdAt()],{handleSearch:A,handleSort:U,handlePageChange:T,handleFilter:V,clearFilters:N,refresh:b,loading:R}=G({baseRoute:f("employee-skills.index"),defaultSort:{field:"created_at",order:"desc"},defaultPerPage:10,columns:w.map(t=>({key:t.key,sortable:t.sortable,searchable:t.searchable}))}),v=g(!1),p=g(!1),i=g(null),d=g([]),h=Q({}),I=t=>{i.value=t,v.value=!0},j=()=>{i.value&&h.delete(f("employee-skills.destroy",i.value.id),{onBefore:()=>{v.value=!1,i.value=null},onSuccess:()=>b(),onError:()=>{}})},M=t=>{d.value=t,p.value=!0},O=()=>{const t=d.value.map(e=>e.id);x.post(f("employee-skills.bulk-destroy"),{ids:t},{onSuccess:()=>{b(),p.value=!1,d.value=[]},onError:()=>{p.value=!1}})},q=[{icon:ee,variant:"outline",tooltip:"View details",onClick:t=>{x.visit(f("employee-skills.show",{id:t.id}))},class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{icon:le,variant:"outline",tooltip:"Edit",onClick:t=>{x.visit(f("employee-skills.edit",{id:t.id}))},class:"text-green-600 hover:text-green-700 border-green-200 hover:border-green-300"},{icon:u,variant:"destructive",tooltip:"Delete",onClick:I,class:"text-red-600 hover:text-red-700"}],L=t=>{t.action==="delete"&&M(t.selectedRows)},z=()=>N();return(t,e)=>(y(),_(B,null,[s(l(W),{title:"Employee Skills"}),s(J,null,{default:o(()=>[a("div",te,[a("div",se,[e[6]||(e[6]=a("div",null,[a("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Employee Skills "),a("p",{class:"text-gray-600 dark:text-gray-400"}," Manage employee skills and proficiency levels ")],-1)),a("div",ae,[s(l(k),{onClick:e[0]||(e[0]=r=>l(x).visit(l(f)("employee-skills.create"))),class:"flex w-full cursor-pointer items-center space-x-2 sm:w-auto"},{default:o(()=>[s(l(Z),{class:"h-4 w-4"}),e[5]||(e[5]=a("span",null,"Add Employee Skill",-1))]),_:1})])]),s(H,{data:t.employeeSkills.data,columns:w,actions:q,"total-records":t.employeeSkills.meta.total,loading:l(R),"current-page":t.employeeSkills.meta.current_page,"default-rows-per-page":t.employeeSkills.meta.per_page,"last-page":t.employeeSkills.meta.last_page,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:l(A),onSort:l(U),onPageChange:l(T),onFilter:l(V),onClearFilters:z,onRefresh:l(b),onBulkAction:L},null,8,["data","total-records","loading","current-page","default-rows-per-page","last-page","onSearch","onSort","onPageChange","onFilter","onRefresh"])]),s(l(C),{open:v.value,"onUpdate:open":e[2]||(e[2]=r=>v.value=r)},{default:o(()=>[s(l(D),{class:"sm:max-w-md"},{default:o(()=>[s(l($),null,{default:o(()=>[s(l(E),{class:"flex items-center space-x-2"},{default:o(()=>[s(l(u),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=a("span",null,"Delete Employee Skill",-1))]),_:1}),s(l(F),null,{default:o(()=>[...e[8]||(e[8]=[n(" Are you sure you want to delete this employee skill? ",-1)])]),_:1})]),_:1}),i.value?(y(),_("div",oe,[a("div",re,[a("div",ne,[s(l(u),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),a("div",ie,[a("strong",null,m(i.value.employee?.full_name??"Unknown"),1),e[9]||(e[9]=n(" (",-1)),a("span",null,m(i.value.skill?.skill_name??"Unknown"),1),e[10]||(e[10]=n(") ",-1))])])])])):X("",!0),s(l(P),{class:"space-x-2"},{default:o(()=>[s(l(k),{variant:"outline",onClick:e[1]||(e[1]=r=>v.value=!1)},{default:o(()=>[...e[11]||(e[11]=[n("Cancel",-1)])]),_:1}),s(l(k),{variant:"destructive",onClick:j,loading:l(h).processing},{default:o(()=>[s(l(u),{class:"mr-2 h-4 w-4"}),e[12]||(e[12]=n("Delete ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),s(l(C),{open:p.value,"onUpdate:open":e[4]||(e[4]=r=>p.value=r)},{default:o(()=>[s(l(D),{class:"sm:max-w-lg"},{default:o(()=>[s(l($),null,{default:o(()=>[s(l(E),{class:"flex items-center space-x-2"},{default:o(()=>[s(l(u),{class:"h-5 w-5 text-red-500"}),e[13]||(e[13]=a("span",null,"Delete Multiple Employee Skills",-1))]),_:1}),s(l(F),null,{default:o(()=>[n(" Are you sure you want to delete "+m(d.value.length)+" selected items? ",1)]),_:1})]),_:1}),a("div",de,[a("div",ue,[a("div",me,[s(l(u),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),a("div",pe,[a("strong",null,m(d.value.length)+" items",1),e[14]||(e[14]=n(" will be deleted. ",-1))])])]),a("div",ce,[a("div",fe,[e[15]||(e[15]=a("strong",null,"Items to be deleted:",-1)),a("ul",ve,[(y(!0),_(B,null,Y(d.value,r=>(y(),_("li",{key:r.id,class:"text-sm"}," â€¢ "+m(r.employee?.full_name??"Unknown")+" ("+m(r.skill?.skill_name??"Unknown")+") ",1))),128))])])])]),s(l(P),{class:"space-x-2"},{default:o(()=>[s(l(k),{variant:"outline",onClick:e[3]||(e[3]=r=>p.value=!1)},{default:o(()=>[...e[16]||(e[16]=[n(" Cancel ",-1)])]),_:1}),s(l(k),{variant:"destructive",onClick:O,loading:l(h).processing},{default:o(()=>[s(l(u),{class:"mr-2 h-4 w-4"}),n(" Delete All ("+m(d.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{$e as default};
