import{d as se,q as x,s as c,p as _,u as le,k as b,c as y,o as k,a as s,b as t,h as oe,w as n,e as a,i as ne,f as m,t as d,F as $,r as re}from"./app-BtxNwyw2.js";import{u as de,c as h,T as u,_ as ie}from"./useServerDataTable-B-sbbf_9.js";import{_ as g}from"./index-jPyfy9EI.js";import{_ as F,a as A,b as N,c as P,d as B,e as T}from"./DialogTitle.vue_vue_type_script_setup_true_lang-VmqF2j8a.js";import{_ as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-CXKSQ9h2.js";import{E as ce}from"./eye-D2vX5Ew9.js";import{S as me}from"./square-pen-CWzznlQk.js";import{P as pe}from"./plus-C9G2PlpZ.js";import"./VisuallyHidden-DfHmtx4U.js";import"./useForwardExpose-AmO87qx4.js";const fe={class:"space-y-6 p-6"},ve={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},_e={class:"flex items-center space-x-0 sm:space-x-3"},ge={key:0,class:"space-y-4"},xe={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},be={class:"flex items-start space-x-2"},ye={class:"text-sm text-red-700 dark:text-red-300"},ke={class:"text-xs"},he={class:"text-xs"},we={class:"text-xs"},Ce={class:"space-y-4"},Se={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},De={class:"flex items-start space-x-2"},Ee={class:"text-sm text-red-700 dark:text-red-300"},$e={class:"max-h-32 overflow-y-auto text-sm text-gray-600 dark:text-gray-400"},Fe={class:"mt-1 space-y-1"},je=se({__name:"Index",props:{education:{}},setup(R){const V=R,p=x(()=>{const l=V.education??{data:[],meta:{}},e=Array.isArray(l.data)?l.data:l.data?.data??[],o=l.meta??{},S=D=>Array.isArray(D)?D[0]:D,Z=Number(S(o.per_page??l.per_page))||e.length,ee=Number(S(o.current_page??l.current_page))||1,te=Number(S(o.total??l.total??o.count))||e.length,ae=l.links??{};return{data:e,meta:{per_page:Z,current_page:ee,total:te},links:ae}}),I=[{title:"Education",href:c("educations.index")}],{handleSearch:M,handleSort:Y,handlePageChange:j,handleFilter:q,clearFilters:O,refresh:w,loading:U}=de({baseRoute:c("educations.index"),defaultSort:{field:"graduation_year",order:"desc"},defaultPerPage:15}),E=_([]),r=_(null),f=_(!1),v=_(!1),i=_([]),C=le({}),z=x(()=>[h("employee","Employee",{sortable:!1,searchable:!1,render:l=>l?`${l.first_name} ${l.last_name}`:""}),h("field_of_study","Field of Study",{sortable:!0,searchable:!0}),h("institution","Institution",{sortable:!0,searchable:!0}),h("graduation_year","Graduation Year",{sortable:!0,searchable:!0})]),G=x(()=>[{label:"View",icon:ce,variant:"outline",tooltip:"View education",onClick:l=>b.visit(c("educations.show",l.id))},{label:"Edit",icon:me,variant:"outline",tooltip:"Edit education",onClick:l=>b.visit(c("educations.edit",l.id)),class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{label:"Delete",icon:u,variant:"destructive",tooltip:"Delete education",onClick:l=>H(l.id),class:"text-red-600 hover:text-red-700"}]),L=x(()=>[{label:"Delete Selected",action:"delete",icon:u,variant:"destructive"}]);function H(l){const e=p.value.data.find(o=>o.id===l);e&&(r.value=e,f.value=!0)}const J=()=>{E.value=[],w()},K=()=>{O(),E.value=[]};function Q(){r.value&&C.delete(c("educations.destroy",r.value.id),{preserveScroll:!0,onSuccess:()=>{f.value=!1,r.value=null,w()}})}function W(){i.value.length!==0&&b.post(c("educations.bulk-destroy"),{ids:i.value.map(l=>l.id)},{preserveScroll:!0,onSuccess:()=>{v.value=!1,i.value=[],w()}})}const X=l=>{i.value=l.selectedRows,l.action==="delete"&&(v.value=!0)};return(l,e)=>(k(),y($,null,[s(t(oe),{title:"Education Management"}),s(ue,{breadcrumbs:I},{default:n(()=>[a("div",fe,[a("div",ve,[e[6]||(e[6]=a("div",null,[a("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Education "),a("p",{class:"text-gray-600 dark:text-gray-400"}," Manage education records and their details. ")],-1)),a("div",_e,[s(t(g),{onClick:e[0]||(e[0]=o=>t(b).visit(t(c)("educations.create"))),class:"flex w-full cursor-pointer items-center justify-center space-x-2 sm:w-auto"},{default:n(()=>[s(t(pe),{class:"h-4 w-4"}),e[5]||(e[5]=a("span",null,"Create Education",-1))]),_:1})])]),a("div",null,[s(ie,{data:p.value.data,columns:z.value,actions:G.value,"bulk-actions":L.value,"total-records":p.value.meta.total,"current-page":p.value.meta.current_page,loading:t(U),"default-rows-per-page":p.value.meta.per_page,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:t(M),onSort:t(Y),onPageChange:t(j),onFilter:t(q),onClearFilters:K,onRefresh:J,onBulkAction:X},null,8,["data","columns","actions","bulk-actions","total-records","current-page","loading","default-rows-per-page","onSearch","onSort","onPageChange","onFilter"])]),a("div",null,[s(t(F),{open:f.value,"onUpdate:open":e[2]||(e[2]=o=>f.value=o)},{default:n(()=>[s(t(A),{class:"sm:max-w-md"},{default:n(()=>[s(t(N),null,{default:n(()=>[s(t(P),{class:"flex items-center space-x-2"},{default:n(()=>[s(t(u),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=a("span",null,"Delete Education",-1))]),_:1}),s(t(B),null,{default:n(()=>[...e[8]||(e[8]=[m(" Are you sure you want to delete this education record? This action cannot be undone. ",-1)])]),_:1})]),_:1}),r.value?(k(),y("div",ge,[a("div",xe,[a("div",be,[s(t(u),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),a("div",ye,[a("strong",null,d(r.value.institution),1),e[9]||(e[9]=a("br",null,null,-1)),a("span",ke,"Employee: "+d(r.value.employee?r.value.employee.first_name+" "+r.value.employee.last_name:""),1),e[10]||(e[10]=a("br",null,null,-1)),a("span",he,"Year: "+d(r.value.graduation_year),1),e[11]||(e[11]=a("br",null,null,-1)),a("span",we,"Field: "+d(r.value.field_of_study),1)])])])])):ne("",!0),s(t(T),{class:"space-x-2"},{default:n(()=>[s(t(g),{variant:"outline",onClick:e[1]||(e[1]=o=>f.value=!1),class:"cursor-pointer"},{default:n(()=>[...e[12]||(e[12]=[m("Cancel",-1)])]),_:1}),s(t(g),{variant:"destructive",onClick:Q,loading:t(C).processing,class:"cursor-pointer"},{default:n(()=>[s(t(u),{class:"mr-2 h-4 w-4"}),e[13]||(e[13]=m(" Delete Education ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),s(t(F),{open:v.value,"onUpdate:open":e[4]||(e[4]=o=>v.value=o)},{default:n(()=>[s(t(A),{class:"sm:max-w-lg"},{default:n(()=>[s(t(N),null,{default:n(()=>[s(t(P),{class:"flex items-center space-x-2"},{default:n(()=>[s(t(u),{class:"h-5 w-5 text-red-500"}),e[14]||(e[14]=a("span",null,"Delete Multiple Education Records",-1))]),_:1}),s(t(B),null,{default:n(()=>[m(" Are you sure you want to delete "+d(i.value.length)+" selected education records? This action cannot be undone. ",1)]),_:1})]),_:1}),a("div",Ce,[a("div",Se,[a("div",De,[s(t(u),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),a("div",Ee,[a("strong",null,d(i.value.length)+" education records",1),e[15]||(e[15]=m(" will be permanently deleted. ",-1))])])]),a("div",$e,[e[16]||(e[16]=a("strong",null,"Records to be deleted:",-1)),a("ul",Fe,[(k(!0),y($,null,re(i.value,o=>(k(),y("li",{key:o.id}," â€¢ "+d(o.institution)+" (Employee: "+d(o.employee?o.employee.first_name+" "+o.employee.last_name:"")+", Year: "+d(o.graduation_year)+") ",1))),128))])])]),s(t(T),{class:"space-x-2"},{default:n(()=>[s(t(g),{variant:"outline",onClick:e[3]||(e[3]=o=>v.value=!1),class:"cursor-pointer"},{default:n(()=>[...e[17]||(e[17]=[m("Cancel",-1)])]),_:1}),s(t(g),{variant:"destructive",onClick:W,loading:t(C).processing,class:"cursor-pointer"},{default:n(()=>[s(t(u),{class:"mr-2 h-4 w-4"}),m(" Delete All ("+d(i.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1})],64))}});export{je as default};
