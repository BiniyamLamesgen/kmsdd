import{d as h,s as x,u as M,l as N,m as P,c,o as m,a as s,b as e,h as w,w as a,e as d,A as B,i as u,f as p,t as n,g as T,n as y,F,k}from"./app-BtxNwyw2.js";import{_ as g}from"./index-jPyfy9EI.js";import{_ as v,a as V,b as E,c as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-FN0ZLx45.js";import{_ as S}from"./CardDescription.vue_vue_type_script_setup_true_lang-kVO9wE2d.js";import{_,a as j}from"./Label.vue_vue_type_script_setup_true_lang-C-ig4YK4.js";import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-CXKSQ9h2.js";import{A as q}from"./arrow-left-CdviPf8L.js";import{C as z}from"./clock-C5gvP2l-.js";import{o as I,u as R,s as f,n as L}from"./types-D45As3cg.js";import"./useForwardExpose-AmO87qx4.js";import"./VisuallyHidden-DfHmtx4U.js";const O={class:"mx-auto max-w-3xl space-y-6 p-6"},G={class:"flex items-center justify-between"},H={class:"flex items-center space-x-4"},J=["src"],K={class:"font-semibold"},Q={class:"text-sm text-gray-600"},W={class:"text-xs text-gray-500"},X={class:"space-y-2"},Z={key:0,class:"text-sm text-red-600"},ee={class:"space-y-2"},te={key:0,class:"text-sm text-red-600"},oe={class:"space-y-2"},se={key:0,class:"text-sm text-red-600"},re={class:"space-y-2"},ae={key:0,class:"text-sm text-red-600"},de={class:"space-y-2"},le={key:0,class:"text-sm text-red-600"},ie={class:"space-y-2"},ne={key:0,class:"text-sm text-red-600"},pe={class:"space-y-2"},me={class:"w-full rounded border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},ce={key:0},ue={key:1},_e={key:0,class:"text-sm text-red-600"},fe={class:"flex items-center justify-end space-x-4 border-t pt-6"},Ce=h({__name:"Edit",props:{project:{},employees:{}},setup(C){const r=C,D=[{title:"Projects",href:x("projects.index")},{title:"Edit",href:""}],t=M({project_name:"",description:"",role:"",start_date:"",end_date:"",outcome:"",employee_id:""});N(()=>{r.project&&(t.project_name=r.project.project_name??"",t.description=r.project.description??"",t.role=r.project.role??"",t.start_date=r.project.start_date??"",t.end_date=r.project.end_date??"",t.outcome=r.project.outcome??"",t.employee_id=String(r.project.employee_id??""))}),P(()=>r.project,l=>{l&&(t.project_name=l.project_name??"",t.description=l.description??"",t.role=l.role??"",t.start_date=l.start_date??"",t.end_date=l.end_date??"",t.outcome=l.outcome??"",t.employee_id=String(l.employee_id??""))});const U=I({project_name:f().min(1,"Project name is required").max(255),description:f().max(5e3).optional(),role:f().max(255).optional(),start_date:f().optional().refine(l=>!l||/^\d{4}-\d{2}-\d{2}$/.test(l),{message:"Start date must be a valid date (YYYY-MM-DD)"}),end_date:f().optional().refine(l=>!l||/^\d{4}-\d{2}-\d{2}$/.test(l),{message:"End date must be a valid date (YYYY-MM-DD)"}),outcome:f().max(5e3).optional(),employee_id:R([f(),L()]).refine(l=>String(l).length>0,{message:"Employee is required"})}),Y=()=>{const l=U.safeParse(t.data());if(t.errors={},!l.success){l.error.issues.forEach(i=>{i.path[0]&&(t.errors[i.path[0]]=i.message)});return}const o={...t.data(),employee_id:Number(t.employee_id)};t.post(x("projects.update",r.project.id),{...o,preserveScroll:!0,onSuccess:()=>k.visit(x("projects.index")),onError:i=>console.log("Form errors:",i)})},b=()=>{k.visit(x("projects.index"))};return(l,o)=>(m(),c(F,null,[s(e(w),{title:"Edit Project"}),s(A,{breadcrumbs:D},{default:a(()=>[d("div",O,[d("div",G,[d("div",H,[s(e(g),{variant:"outline",size:"sm",onClick:b,class:"cursor-pointer"},{default:a(()=>[s(e(q),{class:"mr-2 h-4 w-4"}),o[6]||(o[6]=p(" Back ",-1))]),_:1}),o[7]||(o[7]=d("div",null,[d("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Edit Project "),d("p",{class:"text-gray-600 dark:text-gray-400"}," Update project details like name, description, dates, and employee. ")],-1))])]),r.project.employee?(m(),B(e(v),{key:0},{default:a(()=>[s(e(V),null,{default:a(()=>[s(e(E),{class:"flex items-center gap-2"},{default:a(()=>[...o[8]||(o[8]=[p(" Employee ",-1)])]),_:1}),s(e(S),null,{default:a(()=>[...o[9]||(o[9]=[p(" Project assigned to: ",-1)])]),_:1})]),_:1}),s(e($),{class:"flex items-center gap-4"},{default:a(()=>[r.project.employee.profile_picture?(m(),c("img",{key:0,src:`${r.project.employee.profile_picture}`,alt:"Profile",class:"h-12 w-12 rounded-full object-cover border"},null,8,J)):u("",!0),d("div",null,[d("div",K,n(r.project.employee.first_name)+" "+n(r.project.employee.last_name),1),d("div",Q,n(r.project.employee.position)+" - "+n(r.project.employee.department),1),d("div",W,n(r.project.employee.email),1)])]),_:1})]),_:1})):u("",!0),d("form",{onSubmit:T(Y,["prevent"]),class:"space-y-6"},[s(e(v),null,{default:a(()=>[s(e(V),null,{default:a(()=>[s(e(E),{class:"flex items-center space-x-2"},{default:a(()=>[s(e(z),{class:"h-5 w-5"}),o[10]||(o[10]=d("span",null,"Project Information",-1))]),_:1}),s(e(S),null,{default:a(()=>[...o[11]||(o[11]=[p(" Update the fields below and click save. ",-1)])]),_:1})]),_:1}),s(e($),{class:"space-y-4"},{default:a(()=>[d("div",X,[s(e(_),{for:"project_name"},{default:a(()=>[...o[12]||(o[12]=[p("Project Name *",-1)])]),_:1}),s(e(j),{id:"project_name",modelValue:e(t).project_name,"onUpdate:modelValue":o[0]||(o[0]=i=>e(t).project_name=i),placeholder:"Project name",class:y({"border-red-500":e(t).errors.project_name})},null,8,["modelValue","class"]),e(t).errors.project_name?(m(),c("p",Z,n(e(t).errors.project_name),1)):u("",!0)]),d("div",ee,[s(e(_),{for:"description"},{default:a(()=>[...o[13]||(o[13]=[p("Description",-1)])]),_:1}),s(e(j),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":o[1]||(o[1]=i=>e(t).description=i),placeholder:"Project description",class:y({"border-red-500":e(t).errors.description})},null,8,["modelValue","class"]),e(t).errors.description?(m(),c("p",te,n(e(t).errors.description),1)):u("",!0)]),d("div",oe,[s(e(_),{for:"role"},{default:a(()=>[...o[14]||(o[14]=[p("Role",-1)])]),_:1}),s(e(j),{id:"role",modelValue:e(t).role,"onUpdate:modelValue":o[2]||(o[2]=i=>e(t).role=i),placeholder:"Role in project",class:y({"border-red-500":e(t).errors.role})},null,8,["modelValue","class"]),e(t).errors.role?(m(),c("p",se,n(e(t).errors.role),1)):u("",!0)]),d("div",re,[s(e(_),{for:"start_date"},{default:a(()=>[...o[15]||(o[15]=[p("Start Date",-1)])]),_:1}),s(e(j),{id:"start_date",type:"date",modelValue:e(t).start_date,"onUpdate:modelValue":o[3]||(o[3]=i=>e(t).start_date=i),class:y({"border-red-500":e(t).errors.start_date})},null,8,["modelValue","class"]),e(t).errors.start_date?(m(),c("p",ae,n(e(t).errors.start_date),1)):u("",!0)]),d("div",de,[s(e(_),{for:"end_date"},{default:a(()=>[...o[16]||(o[16]=[p("End Date",-1)])]),_:1}),s(e(j),{id:"end_date",type:"date",modelValue:e(t).end_date,"onUpdate:modelValue":o[4]||(o[4]=i=>e(t).end_date=i),class:y({"border-red-500":e(t).errors.end_date})},null,8,["modelValue","class"]),e(t).errors.end_date?(m(),c("p",le,n(e(t).errors.end_date),1)):u("",!0)]),d("div",ie,[s(e(_),{for:"outcome"},{default:a(()=>[...o[17]||(o[17]=[p("Outcome",-1)])]),_:1}),s(e(j),{id:"outcome",modelValue:e(t).outcome,"onUpdate:modelValue":o[5]||(o[5]=i=>e(t).outcome=i),placeholder:"Project outcome",class:y({"border-red-500":e(t).errors.outcome})},null,8,["modelValue","class"]),e(t).errors.outcome?(m(),c("p",ne,n(e(t).errors.outcome),1)):u("",!0)]),d("div",pe,[s(e(_),{for:"employee_id"},{default:a(()=>[...o[18]||(o[18]=[p("Employee",-1)])]),_:1}),d("div",me,[r.project.employee?(m(),c("span",ce,n(r.project.employee.first_name)+" "+n(r.project.employee.last_name)+" ("+n(r.project.employee.position)+", "+n(r.project.employee.department)+") ",1)):(m(),c("span",ue," Employee ID: "+n(e(t).employee_id),1))]),e(t).errors.employee_id?(m(),c("p",_e,n(e(t).errors.employee_id),1)):u("",!0)])]),_:1})]),_:1}),d("div",fe,[s(e(g),{type:"button",variant:"outline",onClick:b,class:"cursor-pointer"},{default:a(()=>[...o[19]||(o[19]=[p("Cancel",-1)])]),_:1}),s(e(g),{type:"submit",loading:e(t).processing,class:"cursor-pointer"},{default:a(()=>[...o[20]||(o[20]=[p("Update Project",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{Ce as default};
