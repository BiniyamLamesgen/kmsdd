import{d as K,s as m,p as x,u as Q,q as C,k as _,c as y,o as h,a as s,b as t,h as X,w as r,e as l,i as Z,f as p,t as i,F as S,r as ee}from"./app-CZ_92QqR.js";import{u as te,c as o,T as c,_ as le,a as se}from"./useServerDataTable-NCLCFBSb.js";import{_ as g}from"./index-CTru82cN.js";import{_ as E,a as P,b as F,c as $,d as A,e as N}from"./DialogTitle.vue_vue_type_script_setup_true_lang-5Sa-XXAZ.js";import{_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-T57IkxQE.js";import{E as re}from"./eye-BvfQvPh6.js";import{S as oe}from"./square-pen-C2muAAH8.js";import{P as ne}from"./plus-Y4C7Mf4N.js";import"./VisuallyHidden-pKzkU6Eb.js";import"./useForwardExpose-4i7abMob.js";const ie={class:"space-y-6 p-6"},de={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ue={class:"flex items-center space-x-0 sm:space-x-3"},ce={key:0,class:"space-y-4"},me={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},pe={class:"flex items-start space-x-2"},fe={class:"text-sm text-red-700 dark:text-red-300"},be={class:"text-xs"},ve={class:"text-xs"},xe={class:"text-xs"},ge={class:"space-y-4"},_e={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},ye={class:"flex items-start space-x-2"},he={class:"text-sm text-red-700 dark:text-red-300"},ke={class:"max-h-32 overflow-y-auto text-sm text-gray-600 dark:text-gray-400"},we={class:"mt-1 space-y-1"},Ie=K({__name:"Index",props:{employees:{}},setup(B){const f=B,I=[{title:"Employees",href:m("employees.index")}],{handleSearch:T,handleSort:V,handlePageChange:M,handleFilter:R,clearFilters:j,refresh:k,loading:L}=te({baseRoute:m("employees.index"),defaultSort:{field:"first_name",order:"asc"},defaultPerPage:15}),D=x([]),d=x(null),b=x(!1),v=x(!1),u=x([]),w=Q({}),q=C(()=>[o("id","ID",{sortable:!0,searchable:!1}),o("first_name","First Name",{sortable:!0,searchable:!0}),o("last_name","Last Name",{sortable:!0,searchable:!0}),o("full_name","Full Name",{sortable:!0,searchable:!0}),o("position","Position",{sortable:!0,searchable:!0}),o("department","Department",{sortable:!0,searchable:!0}),o("email","Email",{sortable:!1,searchable:!0}),o("phone","Phone",{sortable:!1,searchable:!0}),o("internal_extension","Extension",{sortable:!1,searchable:!1}),o("profile_picture","Profile Picture",{sortable:!1,searchable:!1,render:a=>{if(!a)return"";const e=a.startsWith("http")?a:`/storage/${a}`;return se(e,"Profile",32)}}),o("date_joined","Date Joined",{sortable:!0,searchable:!1}),o("languages","Languages",{sortable:!1,searchable:!0}),o("mentoring_interest","Mentoring Interest",{sortable:!1,searchable:!0}),o("availability_for_sharing","Available for Sharing",{sortable:!1,searchable:!1,render:a=>a?"Yes":"No"}),o("created_at","Created At",{sortable:!1,searchable:!1})]),O=C(()=>[{label:"View",icon:re,variant:"outline",tooltip:"View employee",onClick:a=>_.visit(m("employees.show",a.id))},{label:"Edit",icon:oe,variant:"outline",tooltip:"Edit employee",onClick:a=>_.visit(m("employees.edit",a.id)),class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{label:"Delete",icon:c,variant:"destructive",tooltip:"Delete employee",onClick:a=>z(a.id),class:"text-red-600 hover:text-red-700"}]),U=C(()=>[{label:"Delete Selected",action:"delete",icon:c,variant:"destructive"}]);function z(a){const e=f.employees.data.find(n=>n.id===a);e&&(d.value=e,b.value=!0)}const J=()=>{D.value=[],k()},W=()=>{j(),D.value=[]};function Y(){d.value&&w.delete(m("employees.destroy",d.value.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1,d.value=null,k()}})}function G(){u.value.length!==0&&_.post(m("employees.bulk-destroy"),{ids:u.value.map(a=>a.id)},{preserveScroll:!0,onSuccess:()=>{v.value=!1,u.value=[],k()}})}const H=a=>{u.value=a.selectedRows,a.action==="delete"&&(v.value=!0)};return(a,e)=>(h(),y(S,null,[s(t(X),{title:"Employees Management"}),s(ae,{breadcrumbs:I},{default:r(()=>[l("div",ie,[l("div",de,[e[6]||(e[6]=l("div",null,[l("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Employees "),l("p",{class:"text-gray-600 dark:text-gray-400"}," Manage organization employees and their details. ")],-1)),l("div",ue,[s(t(g),{onClick:e[0]||(e[0]=n=>t(_).visit(t(m)("employees.create"))),class:"flex w-full cursor-pointer items-center justify-center space-x-2 sm:w-auto"},{default:r(()=>[s(t(ne),{class:"h-4 w-4"}),e[5]||(e[5]=l("span",null,"Create Employee",-1))]),_:1})])]),l("div",null,[s(le,{data:f.employees.data,columns:q.value,actions:O.value,"bulk-actions":U.value,"total-records":f.employees.meta.total,"current-page":f.employees.meta.current_page,loading:t(L),"default-rows-per-page":f.employees.meta.per_page,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:t(T),onSort:t(V),onPageChange:t(M),onFilter:t(R),onClearFilters:W,onRefresh:J,onBulkAction:H},null,8,["data","columns","actions","bulk-actions","total-records","current-page","loading","default-rows-per-page","onSearch","onSort","onPageChange","onFilter"])]),l("div",null,[s(t(E),{open:b.value,"onUpdate:open":e[2]||(e[2]=n=>b.value=n)},{default:r(()=>[s(t(P),{class:"sm:max-w-md"},{default:r(()=>[s(t(F),null,{default:r(()=>[s(t($),{class:"flex items-center space-x-2"},{default:r(()=>[s(t(c),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=l("span",null,"Delete Employee",-1))]),_:1}),s(t(A),null,{default:r(()=>[...e[8]||(e[8]=[p(" Are you sure you want to delete this employee? This action cannot be undone. ",-1)])]),_:1})]),_:1}),d.value?(h(),y("div",ce,[l("div",me,[l("div",pe,[s(t(c),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),l("div",fe,[l("strong",null,i(d.value.full_name),1),e[9]||(e[9]=l("br",null,null,-1)),l("span",be,"Position: "+i(d.value.position),1),e[10]||(e[10]=l("br",null,null,-1)),l("span",ve,"Department: "+i(d.value.department),1),e[11]||(e[11]=l("br",null,null,-1)),l("span",xe,"Email: "+i(d.value.email),1)])])])])):Z("",!0),s(t(N),{class:"space-x-2"},{default:r(()=>[s(t(g),{variant:"outline",onClick:e[1]||(e[1]=n=>b.value=!1),class:"cursor-pointer"},{default:r(()=>[...e[12]||(e[12]=[p("Cancel",-1)])]),_:1}),s(t(g),{variant:"destructive",onClick:Y,loading:t(w).processing,class:"cursor-pointer"},{default:r(()=>[s(t(c),{class:"mr-2 h-4 w-4"}),e[13]||(e[13]=p(" Delete Employee ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),s(t(E),{open:v.value,"onUpdate:open":e[4]||(e[4]=n=>v.value=n)},{default:r(()=>[s(t(P),{class:"sm:max-w-lg"},{default:r(()=>[s(t(F),null,{default:r(()=>[s(t($),{class:"flex items-center space-x-2"},{default:r(()=>[s(t(c),{class:"h-5 w-5 text-red-500"}),e[14]||(e[14]=l("span",null,"Delete Multiple Employees",-1))]),_:1}),s(t(A),null,{default:r(()=>[p(" Are you sure you want to delete "+i(u.value.length)+" selected employees? This action cannot be undone. ",1)]),_:1})]),_:1}),l("div",ge,[l("div",_e,[l("div",ye,[s(t(c),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),l("div",he,[l("strong",null,i(u.value.length)+" employees",1),e[15]||(e[15]=p(" will be permanently deleted. ",-1))])])]),l("div",ke,[e[16]||(e[16]=l("strong",null,"Employees to be deleted:",-1)),l("ul",we,[(h(!0),y(S,null,ee(u.value,n=>(h(),y("li",{key:n.id}," â€¢ "+i(n.full_name)+" ("+i(n.position)+", "+i(n.department)+") ",1))),128))])])]),s(t(N),{class:"space-x-2"},{default:r(()=>[s(t(g),{variant:"outline",onClick:e[3]||(e[3]=n=>v.value=!1),class:"cursor-pointer"},{default:r(()=>[...e[17]||(e[17]=[p("Cancel",-1)])]),_:1}),s(t(g),{variant:"destructive",onClick:G,loading:t(w).processing,class:"cursor-pointer"},{default:r(()=>[s(t(c),{class:"mr-2 h-4 w-4"}),p(" Delete All ("+i(u.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1})],64))}});export{Ie as default};
