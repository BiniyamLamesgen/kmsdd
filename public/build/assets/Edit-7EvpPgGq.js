import{d as R,s as w,p as k,u as T,c as n,o as d,a as o,b as e,h as N,w as a,e as l,f as p,g as V,i as u,n as f,t as m,j as E,F as L,r as G,v as F,k as M}from"./app-BtxNwyw2.js";import{_ as h}from"./index-jPyfy9EI.js";import{_ as B,a as A,b as q,c as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-FN0ZLx45.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-kVO9wE2d.js";import{_,a as y}from"./Label.vue_vue_type_script_setup_true_lang-C-ig4YK4.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-CXKSQ9h2.js";import{A as J}from"./arrow-left-CdviPf8L.js";import{S as W}from"./star-DRcTtEfk.js";import{U as Y}from"./upload-Db6fdyKv.js";import{o as K,b as Q,s as c,i as X,u as Z,n as ee}from"./types-D45As3cg.js";import"./useForwardExpose-AmO87qx4.js";import"./VisuallyHidden-DfHmtx4U.js";const te={class:"max-w-6xl space-y-6 p-4 sm:p-6 lg:p-8"},se={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},re={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},oe={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 lg:gap-6"},le={class:"space-y-2"},ae={key:0,class:"text-sm text-red-600"},ie={class:"space-y-2"},ne={key:0,class:"text-sm text-red-600"},de={class:"space-y-2"},pe={key:0,class:"text-sm text-red-600"},me={class:"space-y-2"},ue=["value"],fe={key:0,class:"text-sm text-red-600"},_e={class:"space-y-2"},ce={key:0,class:"text-sm text-red-600"},ye={class:"space-y-2"},ge={key:0,class:"text-sm text-red-600"},xe={class:"space-y-2"},be={key:0,class:"text-sm text-red-600"},ve={class:"space-y-2"},we={key:0,class:"text-sm text-red-600"},ke={class:"space-y-2"},Ve={key:0,class:"text-sm text-red-600"},he={class:"space-y-2"},Ue={key:0,class:"text-sm text-red-600"},Pe={class:"space-y-2"},je={key:0,class:"text-sm text-red-600"},Ee={class:"space-y-2"},Le={key:0,class:"text-sm text-red-600"},Fe={class:"space-y-2"},Ce={key:0,class:"text-sm text-red-600"},$e={class:"space-y-2"},Ie={key:0,class:"text-sm text-red-600"},Se={class:"space-y-2"},De={key:0,class:"text-sm text-red-600"},Re={class:"space-y-2"},Te={key:0,class:"text-sm text-red-600"},Ne={class:"mt-8 border-t pt-6"},Ge={class:"space-y-4"},Me={key:0,class:"mb-4"},Be=["src"],Ae={class:"space-y-2"},qe={class:"text-center"},Oe={class:"text-lg font-medium text-gray-700"},ze={key:0,class:"text-sm text-red-600"},He={class:"flex flex-col items-center justify-end space-y-3 border-t pt-6 sm:flex-row sm:space-y-0 sm:space-x-4"},lt=R({__name:"Edit",props:{employee:{},departments:{}},setup(C){const i=C,$=[{title:"Employees",href:w("employees.index")},{title:"Edit",href:""}],x=k(i.employee.profile_picture?`/storage/${i.employee.profile_picture}`:null),U=k(null),b=k(null),s=T({first_name:i.employee.first_name??"",last_name:i.employee.last_name??"",position:i.employee.position??"",department_id:i.employee.department_id??"",email:i.employee.email??"",phone:i.employee.phone??"",internal_extension:i.employee.internal_extension??"",profile_picture:null,date_joined:i.employee.date_joined??"",linkedin:i.employee.linkedin??"",facebook:i.employee.facebook??"",twitter:i.employee.twitter??"",github:i.employee.github??"",personal_website:i.employee.personal_website??"",languages:i.employee.languages??"",mentoring_interest:i.employee.mentoring_interest??"",availability_for_sharing:i.employee.availability_for_sharing??!1}),I=K({first_name:c().min(1,"First name is required").max(255),last_name:c().min(1,"Last name is required").max(255),position:c().min(1,"Position is required").max(255),department_id:Z([c(),ee()]).optional(),email:c().email("Invalid email address").max(255),phone:c().max(20).optional(),internal_extension:c().max(10).optional(),profile_picture:X(File).optional(),date_joined:c().optional(),linkedin:c().max(500).optional(),facebook:c().max(500).optional(),twitter:c().max(500).optional(),github:c().max(500).optional(),personal_website:c().max(500).optional(),languages:c().max(500).optional(),mentoring_interest:c().optional(),availability_for_sharing:Q()});function P(v){const t=v.target;if(b.value=null,t.files&&t.files[0]){const r=t.files[0];if(!r.type.startsWith("image/")){b.value="Only image files are allowed",s.profile_picture=null,x.value=null;return}s.profile_picture=r;const g=new FileReader;g.onload=D=>{x.value=D.target?.result},g.readAsDataURL(r)}else s.profile_picture=null,x.value=i.employee.profile_picture?`/storage/${i.employee.profile_picture}`:null}const S=()=>{b.value=null;const v=I.safeParse(s.data());if(s.errors={},!v.success){v.error.issues.forEach(r=>{r.path[0]&&(s.errors[r.path[0]]=r.message)});return}const t=new FormData;Object.entries(s.data()).forEach(([r,g])=>{r==="profile_picture"&&g instanceof File?t.append("profile_picture",g):r!=="profile_picture"&&g!==void 0&&g!==null&&t.append(r,g)}),s.post(w("employees.update",i.employee.id),t)},j=()=>{M.visit(w("employees.index"))};return(v,t)=>(d(),n(L,null,[o(e(N),{title:"Edit Employee"}),o(H,{breadcrumbs:$},{default:a(()=>[l("div",te,[l("div",se,[l("div",re,[o(e(h),{variant:"outline",size:"sm",onClick:j,class:"w-fit cursor-pointer"},{default:a(()=>[o(e(J),{class:"mr-2 h-4 w-4"}),t[18]||(t[18]=p(" Back ",-1))]),_:1}),t[19]||(t[19]=l("div",null,[l("h1",{class:"text-2xl font-semibold text-gray-900 sm:text-3xl dark:text-gray-100"}," Edit Employee "),l("p",{class:"text-sm text-gray-600 sm:text-base dark:text-gray-400"}," Update employee details. ")],-1))])]),l("form",{onSubmit:V(S,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[o(e(B),null,{default:a(()=>[o(e(A),null,{default:a(()=>[o(e(q),{class:"flex items-center space-x-2"},{default:a(()=>[o(e(W),{class:"h-5 w-5"}),t[20]||(t[20]=l("span",null,"Employee Information",-1))]),_:1}),o(e(z),null,{default:a(()=>[...t[21]||(t[21]=[p(" Update the fields below and click save. ",-1)])]),_:1})]),_:1}),o(e(O),null,{default:a(()=>[l("div",oe,[l("div",le,[o(e(_),{for:"first_name"},{default:a(()=>[...t[22]||(t[22]=[p("First Name *",-1)])]),_:1}),o(e(y),{id:"first_name",modelValue:e(s).first_name,"onUpdate:modelValue":t[0]||(t[0]=r=>e(s).first_name=r),placeholder:"First name",class:f([{"border-red-500":e(s).errors.first_name},"w-full"])},null,8,["modelValue","class"]),e(s).errors.first_name?(d(),n("p",ae,m(e(s).errors.first_name),1)):u("",!0)]),l("div",ie,[o(e(_),{for:"last_name"},{default:a(()=>[...t[23]||(t[23]=[p("Last Name *",-1)])]),_:1}),o(e(y),{id:"last_name",modelValue:e(s).last_name,"onUpdate:modelValue":t[1]||(t[1]=r=>e(s).last_name=r),placeholder:"Last name",class:f([{"border-red-500":e(s).errors.last_name},"w-full"])},null,8,["modelValue","class"]),e(s).errors.last_name?(d(),n("p",ne,m(e(s).errors.last_name),1)):u("",!0)]),l("div",de,[o(e(_),{for:"position"},{default:a(()=>[...t[24]||(t[24]=[p("Position *",-1)])]),_:1}),o(e(y),{id:"position",modelValue:e(s).position,"onUpdate:modelValue":t[2]||(t[2]=r=>e(s).position=r),placeholder:"Position",class:f([{"border-red-500":e(s).errors.position},"w-full"])},null,8,["modelValue","class"]),e(s).errors.position?(d(),n("p",pe,m(e(s).errors.position),1)):u("",!0)]),l("div",me,[o(e(_),{for:"department_id"},{default:a(()=>[...t[25]||(t[25]=[p("Department",-1)])]),_:1}),E(l("select",{id:"department_id","onUpdate:modelValue":t[3]||(t[3]=r=>e(s).department_id=r),class:f(["w-full rounded border px-3 py-2",e(s).errors.department_id?"border-red-500":"border-gray-300"])},[t[26]||(t[26]=l("option",{value:""}," Select a department ",-1)),(d(!0),n(L,null,G(i.departments,r=>(d(),n("option",{key:r.id,value:r.id},m(r.name),9,ue))),128))],2),[[F,e(s).department_id]]),e(s).errors.department_id?(d(),n("p",fe,m(e(s).errors.department_id),1)):u("",!0)]),l("div",_e,[o(e(_),{for:"email"},{default:a(()=>[...t[27]||(t[27]=[p("Email *",-1)])]),_:1}),o(e(y),{id:"email",modelValue:e(s).email,"onUpdate:modelValue":t[4]||(t[4]=r=>e(s).email=r),placeholder:"Email",class:f([{"border-red-500":e(s).errors.email},"w-full"])},null,8,["modelValue","class"]),e(s).errors.email?(d(),n("p",ce,m(e(s).errors.email),1)):u("",!0)]),l("div",ye,[o(e(_),{for:"phone"},{default:a(()=>[...t[28]||(t[28]=[p("Phone",-1)])]),_:1}),o(e(y),{id:"phone",modelValue:e(s).phone,"onUpdate:modelValue":t[5]||(t[5]=r=>e(s).phone=r),placeholder:"Phone",class:f([{"border-red-500":e(s).errors.phone},"w-full"])},null,8,["modelValue","class"]),e(s).errors.phone?(d(),n("p",ge,m(e(s).errors.phone),1)):u("",!0)]),l("div",xe,[o(e(_),{for:"internal_extension"},{default:a(()=>[...t[29]||(t[29]=[p("Internal Extension",-1)])]),_:1}),o(e(y),{id:"internal_extension",modelValue:e(s).internal_extension,"onUpdate:modelValue":t[6]||(t[6]=r=>e(s).internal_extension=r),placeholder:"Internal extension",class:f([{"border-red-500":e(s).errors.internal_extension},"w-full"])},null,8,["modelValue","class"]),e(s).errors.internal_extension?(d(),n("p",be,m(e(s).errors.internal_extension),1)):u("",!0)]),l("div",ve,[o(e(_),{for:"date_joined"},{default:a(()=>[...t[30]||(t[30]=[p("Date Joined",-1)])]),_:1}),o(e(y),{id:"date_joined",type:"date",modelValue:e(s).date_joined,"onUpdate:modelValue":t[7]||(t[7]=r=>e(s).date_joined=r),class:f([{"border-red-500":e(s).errors.date_joined},"w-full"])},null,8,["modelValue","class"]),e(s).errors.date_joined?(d(),n("p",we,m(e(s).errors.date_joined),1)):u("",!0)]),l("div",ke,[o(e(_),{for:"linkedin"},{default:a(()=>[...t[31]||(t[31]=[p("LinkedIn",-1)])]),_:1}),o(e(y),{id:"linkedin",modelValue:e(s).linkedin,"onUpdate:modelValue":t[8]||(t[8]=r=>e(s).linkedin=r),placeholder:"LinkedIn URL",class:f([{"border-red-500":e(s).errors.linkedin},"w-full"])},null,8,["modelValue","class"]),e(s).errors.linkedin?(d(),n("p",Ve,m(e(s).errors.linkedin),1)):u("",!0)]),l("div",he,[o(e(_),{for:"facebook"},{default:a(()=>[...t[32]||(t[32]=[p("Facebook",-1)])]),_:1}),o(e(y),{id:"facebook",modelValue:e(s).facebook,"onUpdate:modelValue":t[9]||(t[9]=r=>e(s).facebook=r),placeholder:"Facebook URL",class:f([{"border-red-500":e(s).errors.facebook},"w-full"])},null,8,["modelValue","class"]),e(s).errors.facebook?(d(),n("p",Ue,m(e(s).errors.facebook),1)):u("",!0)]),l("div",Pe,[o(e(_),{for:"twitter"},{default:a(()=>[...t[33]||(t[33]=[p("Twitter",-1)])]),_:1}),o(e(y),{id:"twitter",modelValue:e(s).twitter,"onUpdate:modelValue":t[10]||(t[10]=r=>e(s).twitter=r),placeholder:"Twitter URL",class:f([{"border-red-500":e(s).errors.twitter},"w-full"])},null,8,["modelValue","class"]),e(s).errors.twitter?(d(),n("p",je,m(e(s).errors.twitter),1)):u("",!0)]),l("div",Ee,[o(e(_),{for:"github"},{default:a(()=>[...t[34]||(t[34]=[p("GitHub",-1)])]),_:1}),o(e(y),{id:"github",modelValue:e(s).github,"onUpdate:modelValue":t[11]||(t[11]=r=>e(s).github=r),placeholder:"GitHub URL",class:f([{"border-red-500":e(s).errors.github},"w-full"])},null,8,["modelValue","class"]),e(s).errors.github?(d(),n("p",Le,m(e(s).errors.github),1)):u("",!0)]),l("div",Fe,[o(e(_),{for:"personal_website"},{default:a(()=>[...t[35]||(t[35]=[p("Personal Website",-1)])]),_:1}),o(e(y),{id:"personal_website",modelValue:e(s).personal_website,"onUpdate:modelValue":t[12]||(t[12]=r=>e(s).personal_website=r),placeholder:"Personal website URL",class:f([{"border-red-500":e(s).errors.personal_website},"w-full"])},null,8,["modelValue","class"]),e(s).errors.personal_website?(d(),n("p",Ce,m(e(s).errors.personal_website),1)):u("",!0)]),l("div",$e,[o(e(_),{for:"languages"},{default:a(()=>[...t[36]||(t[36]=[p("Languages",-1)])]),_:1}),o(e(y),{id:"languages",modelValue:e(s).languages,"onUpdate:modelValue":t[13]||(t[13]=r=>e(s).languages=r),placeholder:"Languages",class:f([{"border-red-500":e(s).errors.languages},"w-full"])},null,8,["modelValue","class"]),e(s).errors.languages?(d(),n("p",Ie,m(e(s).errors.languages),1)):u("",!0)]),l("div",Se,[o(e(_),{for:"mentoring_interest"},{default:a(()=>[...t[37]||(t[37]=[p("Mentoring Interest",-1)])]),_:1}),o(e(y),{id:"mentoring_interest",modelValue:e(s).mentoring_interest,"onUpdate:modelValue":t[14]||(t[14]=r=>e(s).mentoring_interest=r),placeholder:"Mentoring interest",class:f([{"border-red-500":e(s).errors.mentoring_interest},"w-full"])},null,8,["modelValue","class"]),e(s).errors.mentoring_interest?(d(),n("p",De,m(e(s).errors.mentoring_interest),1)):u("",!0)]),l("div",Re,[o(e(_),{for:"availability_for_sharing"},{default:a(()=>[...t[38]||(t[38]=[p("Available for Sharing",-1)])]),_:1}),E(l("select",{id:"availability_for_sharing","onUpdate:modelValue":t[15]||(t[15]=r=>e(s).availability_for_sharing=r),class:f(["w-full rounded border px-3 py-2",e(s).errors.availability_for_sharing?"border-red-500":"border-gray-300"])},[...t[39]||(t[39]=[l("option",{value:!0},"Yes",-1),l("option",{value:!1},"No",-1)])],2),[[F,e(s).availability_for_sharing]]),e(s).errors.availability_for_sharing?(d(),n("p",Te,m(e(s).errors.availability_for_sharing),1)):u("",!0)])]),l("div",Ne,[l("div",Ge,[o(e(_),{for:"profile_picture",class:"text-lg font-medium"},{default:a(()=>[...t[40]||(t[40]=[p("Profile Picture",-1)])]),_:1}),l("div",{onClick:t[16]||(t[16]=r=>U.value?.click()),onDragover:t[17]||(t[17]=V(()=>{},["prevent"])),onDrop:V(P,["prevent"]),class:f(["relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-400 transition-colors duration-200 bg-gray-50 hover:bg-blue-50 min-h-[200px] flex flex-col items-center justify-center",{"border-red-300 bg-red-50":b.value||e(s).errors.profile_picture}])},[l("input",{ref_key:"imageInputRef",ref:U,id:"profile_picture",type:"file",accept:"image/*",onChange:P,class:"hidden"},null,544),x.value?(d(),n("div",Me,[l("img",{src:x.value,alt:"Profile Preview",class:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"},null,8,Be)])):u("",!0),l("div",Ae,[o(e(Y),{class:"w-12 h-12 text-gray-400 mx-auto"}),l("div",qe,[l("p",Oe,m(x.value?"Change Profile Picture":"Upload Profile Picture"),1),t[41]||(t[41]=l("p",{class:"text-sm text-gray-500 mt-1"}," Drag and drop an image here, or click to select ",-1)),t[42]||(t[42]=l("p",{class:"text-xs text-gray-400 mt-1"}," Supports: JPG, PNG, GIF, SVG (Max: 2MB) ",-1))])])],34),b.value||e(s).errors.profile_picture?(d(),n("p",ze,m(b.value||e(s).errors.profile_picture),1)):u("",!0)])])]),_:1})]),_:1}),l("div",He,[o(e(h),{type:"button",variant:"outline",onClick:j,class:"order-2 w-full cursor-pointer sm:order-1 sm:w-auto"},{default:a(()=>[...t[43]||(t[43]=[p(" Cancel ",-1)])]),_:1}),o(e(h),{type:"submit",loading:e(s).processing,class:"order-1 w-full cursor-pointer sm:order-2 sm:w-auto"},{default:a(()=>[...t[44]||(t[44]=[p(" Update Employee ",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{lt as default};
