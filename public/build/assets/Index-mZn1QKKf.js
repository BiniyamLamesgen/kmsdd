import{d as ae,s as p,p as v,u as le,q as g,k as D,c as y,o as k,a,b as t,h as re,w as r,e as s,i as ne,f as c,t as i,F as w,r as oe}from"./app-B8cnIyhQ.js";import{u as ie,c as m,T as u,_ as de}from"./useServerDataTable-CyAAKgfs.js";import{_ as b}from"./index-C4qItS30.js";import{_ as E,a as F,b as P,c as A,d as R,e as B}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CRKjuGHD.js";import{_ as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-KgpCTNUL.js";import{S as ce}from"./square-pen-Bq_BF5T8.js";import{P as pe}from"./plus-BlhWpQ8-.js";import"./VisuallyHidden-DfpOj_YV.js";import"./useForwardExpose-BKx_IIGC.js";const me={class:"space-y-6 p-6"},xe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},fe={class:"flex items-center space-x-0 sm:space-x-3"},ve={key:0,class:"space-y-4"},be={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},_e={class:"flex items-start space-x-2"},ge={class:"text-sm text-red-700 dark:text-red-300"},ye={class:"text-xs"},ke={class:"text-xs"},he={class:"text-xs"},Ce={class:"mt-2 text-xs text-gray-700 dark:text-gray-300"},De={class:"mt-1 max-h-24 overflow-y-auto text-xs text-gray-600 dark:text-gray-400"},Ne={class:"space-y-4"},Se={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},$e={class:"flex items-start space-x-2"},we={class:"text-sm text-red-700 dark:text-red-300"},Ee={class:"max-h-40 overflow-y-auto text-sm text-gray-600 dark:text-gray-400"},Fe={class:"mt-1 space-y-1"},Oe=ae({__name:"Index",props:{experiences:{}},setup(T){const _=T,I=[{title:"Experiences",href:p("experiences.index")}],{handleSearch:V,handleSort:M,handlePageChange:j,handleFilter:q,clearFilters:O,refresh:h,loading:U}=ie({baseRoute:p("experiences.index"),defaultSort:{field:"company_name",order:"asc"},defaultPerPage:15}),N=v([]),n=v(null),x=v(!1),f=v(!1),d=v([]),C=le({}),S=g(()=>{const o=Array.isArray(_.experiences?.data)?_.experiences.data:[],e=_.experiences?.meta?.per_page,l=_.experiences?.meta?.current_page,Y=Number.isFinite(Number(e))&&Number(e)>0?Number(e):15,Z=((Number.isFinite(Number(l))&&Number(l)>0?Number(l):1)-1)*Y;return o.map((ee,te)=>{const $=Z+te+1,se=Number.isFinite(Number($))?$:null;return{...ee,serial:se}})}),L=g(()=>[m("employee","Employee",{sortable:!1,searchable:!0,render:(o,e)=>{const l=e.employee?`${e.employee.first_name??""} ${e.employee.last_name??""}`.trim()||`#${e.employee_id}`:`#${e.employee_id}`;return typeof e.serial=="number"&&Number.isFinite(e.serial)?`${e.serial}. ${l}`:l}}),m("company_name","Company",{sortable:!0,searchable:!0}),m("position","Position",{sortable:!0,searchable:!0}),m("responsibilities","Responsibilities",{sortable:!1,searchable:!1,class:"text-center"}),m("start_date","Start Date",{sortable:!0,searchable:!1}),m("end_date","End Date",{sortable:!0,searchable:!1})]),z=g(()=>[{label:"Edit",icon:ce,variant:"outline",tooltip:"Edit experience",onClick:o=>D.visit(p("experiences.edit",o.id)),class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{label:"Delete",icon:u,variant:"destructive",tooltip:"Delete experience",onClick:o=>H(o.id),class:"text-red-600 hover:text-red-700"}]),G=g(()=>[{label:"Delete Selected",action:"delete",icon:u,variant:"destructive"}]);function H(o){const e=S.value.find(l=>l.id===o);e&&(n.value=e,x.value=!0)}const J=()=>{N.value=[],h()},K=()=>{O(),N.value=[]};function Q(){n.value&&C.delete(p("experiences.destroy",n.value.id),{preserveScroll:!0,onSuccess:()=>{x.value=!1,n.value=null,h()}})}function W(){d.value.length!==0&&D.post(p("experiences.bulk-destroy"),{ids:d.value.map(o=>o.id)},{preserveScroll:!0,onSuccess:()=>{f.value=!1,d.value=[],h()}})}const X=o=>{d.value=o.selectedRows,o.action==="delete"&&(f.value=!0)};return(o,e)=>(k(),y(w,null,[a(t(re),{title:"Experiences Management"}),a(ue,{breadcrumbs:I},{default:r(()=>[s("div",me,[s("div",xe,[e[6]||(e[6]=s("div",null,[s("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},"Experiences"),s("p",{class:"text-gray-600 dark:text-gray-400"},"Manage employee experiences and their details.")],-1)),s("div",fe,[a(t(b),{onClick:e[0]||(e[0]=l=>t(D).visit(t(p)("experiences.create"))),class:"flex w-full cursor-pointer items-center justify-center space-x-2 sm:w-auto"},{default:r(()=>[a(t(pe),{class:"h-4 w-4"}),e[5]||(e[5]=s("span",null,"Create Experience",-1))]),_:1})])]),a(de,{data:S.value,columns:L.value,actions:z.value,"bulk-actions":G.value,"total-records":o.experiences.meta.total,"current-page":o.experiences.meta.current_page,loading:t(U),"default-rows-per-page":10,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:t(V),onSort:t(M),onPageChange:t(j),onFilter:t(q),onClearFilters:K,onRefresh:J,onBulkAction:X},null,8,["data","columns","actions","bulk-actions","total-records","current-page","loading","onSearch","onSort","onPageChange","onFilter"])]),a(t(E),{open:x.value,"onUpdate:open":e[2]||(e[2]=l=>x.value=l)},{default:r(()=>[a(t(F),{class:"sm:max-w-md"},{default:r(()=>[a(t(P),null,{default:r(()=>[a(t(A),{class:"flex items-center space-x-2"},{default:r(()=>[a(t(u),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=s("span",null,"Delete Experience",-1))]),_:1}),a(t(R),null,{default:r(()=>[...e[8]||(e[8]=[c(" Are you sure you want to delete this experience? This action cannot be undone. ",-1)])]),_:1})]),_:1}),n.value?(k(),y("div",ve,[s("div",be,[s("div",_e,[a(t(u),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),s("div",ge,[s("strong",null,i(n.value.company_name)+" — "+i(n.value.position),1),e[10]||(e[10]=s("br",null,null,-1)),s("span",ye,"Employee: "+i(n.value.employee&&((n.value.employee.first_name??"")+" "+(n.value.employee.last_name??"")).trim()||"#"+n.value.employee_id),1),e[11]||(e[11]=s("br",null,null,-1)),s("span",ke,"Duration: "+i(n.value.duration??"N/A"),1),e[12]||(e[12]=s("br",null,null,-1)),s("span",he,"Start: "+i(n.value.start_date??"N/A")+" | End: "+i(n.value.end_date??"N/A"),1),s("div",Ce,[e[9]||(e[9]=s("strong",null,"Responsibilities:",-1)),s("div",De,i(n.value.responsibilities??"—"),1)])])])])])):ne("",!0),a(t(B),{class:"space-x-2"},{default:r(()=>[a(t(b),{variant:"outline",onClick:e[1]||(e[1]=l=>x.value=!1),class:"cursor-pointer"},{default:r(()=>[...e[13]||(e[13]=[c("Cancel",-1)])]),_:1}),a(t(b),{variant:"destructive",onClick:Q,loading:t(C).processing,class:"cursor-pointer"},{default:r(()=>[a(t(u),{class:"mr-2 h-4 w-4"}),e[14]||(e[14]=c(" Delete Experience ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),a(t(E),{open:f.value,"onUpdate:open":e[4]||(e[4]=l=>f.value=l)},{default:r(()=>[a(t(F),{class:"sm:max-w-lg"},{default:r(()=>[a(t(P),null,{default:r(()=>[a(t(A),{class:"flex items-center space-x-2"},{default:r(()=>[a(t(u),{class:"h-5 w-5 text-red-500"}),e[15]||(e[15]=s("span",null,"Delete Multiple Experiences",-1))]),_:1}),a(t(R),null,{default:r(()=>[c(" Are you sure you want to delete "+i(d.value.length)+" selected experiences? This action cannot be undone. ",1)]),_:1})]),_:1}),s("div",Ne,[s("div",Se,[s("div",$e,[a(t(u),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),s("div",we,[s("strong",null,i(d.value.length)+" experiences",1),e[16]||(e[16]=c(" will be permanently deleted. ",-1))])])]),s("div",Ee,[e[17]||(e[17]=s("strong",null,"Experiences to be deleted:",-1)),s("ul",Fe,[(k(!0),y(w,null,oe(d.value,l=>(k(),y("li",{key:l.id}," • "+i(l.company_name)+" — "+i(l.position)+" (Employee: "+i(l.employee&&((l.employee.first_name??"")+" "+(l.employee.last_name??"")).trim()||"#"+l.employee_id)+") ",1))),128))])])]),a(t(B),{class:"space-x-2"},{default:r(()=>[a(t(b),{variant:"outline",onClick:e[3]||(e[3]=l=>f.value=!1),class:"cursor-pointer"},{default:r(()=>[...e[18]||(e[18]=[c("Cancel",-1)])]),_:1}),a(t(b),{variant:"destructive",onClick:W,loading:t(C).processing,class:"cursor-pointer"},{default:r(()=>[a(t(u),{class:"mr-2 h-4 w-4"}),c(" Delete All ("+i(d.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Oe as default};
