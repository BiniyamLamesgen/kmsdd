import{d as Q,s as c,p as b,u as X,q as C,k as y,c as _,o as h,a,b as t,h as Y,w as r,e as l,i as Z,f as m,t as n,F as S,r as ee}from"./app-CZ_92QqR.js";import{u as te,c as d,T as f,_ as le,a as ae}from"./useServerDataTable-NCLCFBSb.js";import{_ as x}from"./index-CTru82cN.js";import{_ as I,a as $,b as F,c as A,d as T,e as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-5Sa-XXAZ.js";import{I as se,_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-T57IkxQE.js";import{E as oe}from"./eye-BvfQvPh6.js";import{S as ne}from"./square-pen-C2muAAH8.js";import{P as ie}from"./plus-Y4C7Mf4N.js";import"./VisuallyHidden-pKzkU6Eb.js";import"./useForwardExpose-4i7abMob.js";const de={class:"space-y-6 p-6"},ue={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ce={class:"flex items-center space-x-0 sm:space-x-3"},me={key:0,class:"space-y-4"},fe={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},pe={class:"flex items-start space-x-2"},ge={class:"text-sm text-red-700 dark:text-red-300"},ve={class:"text-xs"},be={class:"text-xs"},xe={class:"text-xs"},ye={class:"space-y-4"},_e={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},he={class:"flex items-start space-x-2"},ke={class:"text-sm text-red-700 dark:text-red-300"},we={class:"max-h-32 overflow-y-auto text-sm text-gray-600 dark:text-gray-400"},Ce={class:"mt-1 space-y-1"},Ve=Q({__name:"Index",props:{gallery:{}},setup(B){const p=B,E=[{title:"Gallery",href:c("gallery.index")}],{handleSearch:V,handleSort:G,handlePageChange:N,handleFilter:R,clearFilters:M,refresh:k,loading:j}=te({baseRoute:c("gallery.index"),defaultSort:{field:"date",order:"desc"},defaultPerPage:15}),D=b([]),i=b(null),g=b(!1),v=b(!1),u=b([]),w=X({}),q=C(()=>[d("id","ID",{sortable:!0,searchable:!1}),d("image","Image",{sortable:!1,searchable:!1,render:s=>{if(!s)return"";const e=s.startsWith("http")?s:`/storage/${s}`;return ae(e,"Gallery Image",48)}}),d("title","Title",{sortable:!0,searchable:!0}),d("alt","Alt Text",{sortable:!1,searchable:!0}),d("description","Description",{sortable:!1,searchable:!0}),d("category","Category",{sortable:!0,searchable:!0}),d("employee","Employee",{sortable:!0,searchable:!0}),d("date","Date",{sortable:!0,searchable:!1}),d("created_at","Created At",{sortable:!1,searchable:!1})]),O=C(()=>[{label:"View",icon:oe,variant:"outline",tooltip:"View image",onClick:s=>y.visit(c("gallery.show",s.id))},{label:"Edit",icon:ne,variant:"outline",tooltip:"Edit image",onClick:s=>y.visit(c("gallery.edit",s.id)),class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{label:"Delete",icon:f,variant:"destructive",tooltip:"Delete image",onClick:s=>L(s.id),class:"text-red-600 hover:text-red-700"}]),U=C(()=>[{label:"Delete Selected",action:"delete",icon:f,variant:"destructive"}]);function L(s){const e=p.gallery.data.find(o=>o.id===s);e&&(i.value=e,g.value=!0)}const W=()=>{D.value=[],k()},z=()=>{M(),D.value=[]};function H(){i.value&&w.delete(c("gallery.destroy",i.value.id),{preserveScroll:!0,onSuccess:()=>{g.value=!1,i.value=null,k()}})}function J(){u.value.length!==0&&y.post(c("gallery.bulk-destroy"),{ids:u.value.map(s=>s.id)},{preserveScroll:!0,onSuccess:()=>{v.value=!1,u.value=[],k()}})}const K=s=>{u.value=s.selectedRows,s.action==="delete"&&(v.value=!0)};return(s,e)=>(h(),_(S,null,[a(t(Y),{title:"Gallery Management"}),a(re,{breadcrumbs:E},{default:r(()=>[l("div",de,[l("div",ue,[e[6]||(e[6]=l("div",null,[l("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Gallery "),l("p",{class:"text-gray-600 dark:text-gray-400"}," Manage gallery images and details. ")],-1)),l("div",ce,[a(t(x),{onClick:e[0]||(e[0]=o=>t(y).visit(t(c)("gallery.create"))),class:"flex w-full cursor-pointer items-center justify-center space-x-2 sm:w-auto"},{default:r(()=>[a(t(ie),{class:"h-4 w-4"}),e[5]||(e[5]=l("span",null,"Add Gallery",-1))]),_:1})])]),l("div",null,[a(le,{data:p.gallery.data,columns:q.value,actions:O.value,"bulk-actions":U.value,"total-records":p.gallery.meta.total,"current-page":p.gallery.meta.current_page,loading:t(j),"default-rows-per-page":p.gallery.meta.per_page,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:t(V),onSort:t(G),onPageChange:t(N),onFilter:t(R),onClearFilters:z,onRefresh:W,onBulkAction:K},null,8,["data","columns","actions","bulk-actions","total-records","current-page","loading","default-rows-per-page","onSearch","onSort","onPageChange","onFilter"])]),l("div",null,[a(t(I),{open:g.value,"onUpdate:open":e[2]||(e[2]=o=>g.value=o)},{default:r(()=>[a(t($),{class:"sm:max-w-md"},{default:r(()=>[a(t(F),null,{default:r(()=>[a(t(A),{class:"flex items-center space-x-2"},{default:r(()=>[a(t(f),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=l("span",null,"Delete Image",-1))]),_:1}),a(t(T),null,{default:r(()=>[...e[8]||(e[8]=[m(" Are you sure you want to delete this image? This action cannot be undone. ",-1)])]),_:1})]),_:1}),i.value?(h(),_("div",me,[l("div",fe,[l("div",pe,[a(t(se),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),l("div",ge,[l("strong",null,n(i.value.title),1),e[9]||(e[9]=l("br",null,null,-1)),l("span",ve,"Category: "+n(i.value.category),1),e[10]||(e[10]=l("br",null,null,-1)),l("span",be,"Employee: "+n(i.value.employee),1),e[11]||(e[11]=l("br",null,null,-1)),l("span",xe,"Date: "+n(i.value.date),1)])])])])):Z("",!0),a(t(P),{class:"space-x-2"},{default:r(()=>[a(t(x),{variant:"outline",onClick:e[1]||(e[1]=o=>g.value=!1),class:"cursor-pointer"},{default:r(()=>[...e[12]||(e[12]=[m("Cancel",-1)])]),_:1}),a(t(x),{variant:"destructive",onClick:H,loading:t(w).processing,class:"cursor-pointer"},{default:r(()=>[a(t(f),{class:"mr-2 h-4 w-4"}),e[13]||(e[13]=m(" Delete Image ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),a(t(I),{open:v.value,"onUpdate:open":e[4]||(e[4]=o=>v.value=o)},{default:r(()=>[a(t($),{class:"sm:max-w-lg"},{default:r(()=>[a(t(F),null,{default:r(()=>[a(t(A),{class:"flex items-center space-x-2"},{default:r(()=>[a(t(f),{class:"h-5 w-5 text-red-500"}),e[14]||(e[14]=l("span",null,"Delete Multiple Images",-1))]),_:1}),a(t(T),null,{default:r(()=>[m(" Are you sure you want to delete "+n(u.value.length)+" selected images? This action cannot be undone. ",1)]),_:1})]),_:1}),l("div",ye,[l("div",_e,[l("div",he,[a(t(f),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),l("div",ke,[l("strong",null,n(u.value.length)+" images",1),e[15]||(e[15]=m(" will be permanently deleted. ",-1))])])]),l("div",we,[e[16]||(e[16]=l("strong",null,"Images to be deleted:",-1)),l("ul",Ce,[(h(!0),_(S,null,ee(u.value,o=>(h(),_("li",{key:o.id}," â€¢ "+n(o.title)+" ("+n(o.category)+", "+n(o.employee)+") ",1))),128))])])]),a(t(P),{class:"space-x-2"},{default:r(()=>[a(t(x),{variant:"outline",onClick:e[3]||(e[3]=o=>v.value=!1),class:"cursor-pointer"},{default:r(()=>[...e[17]||(e[17]=[m("Cancel",-1)])]),_:1}),a(t(x),{variant:"destructive",onClick:J,loading:t(w).processing,class:"cursor-pointer"},{default:r(()=>[a(t(f),{class:"mr-2 h-4 w-4"}),m(" Delete All ("+n(u.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1})],64))}});export{Ve as default};
