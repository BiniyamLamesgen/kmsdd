import{d as M,s as o,p as g,u as G,E as J,c as v,o as x,a,b as e,h as K,w as l,e as r,k as h,i as Q,f as d,t as b,F as D,r as W}from"./app-B8cnIyhQ.js";import{C,c as w,u as X,_ as Y,T as m}from"./useServerDataTable-CyAAKgfs.js";import{_ as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-KgpCTNUL.js";import{_ as f}from"./index-C4qItS30.js";import{_ as S,a as $,b as F,c as P,d as A,e as B}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CRKjuGHD.js";import{P as ee}from"./plus-BlhWpQ8-.js";import{S as te}from"./square-pen-Bq_BF5T8.js";import"./useForwardExpose-BKx_IIGC.js";import"./VisuallyHidden-DfpOj_YV.js";const ae={class:"p-6 space-y-6"},se={class:"flex items-center justify-between"},le={class:"flex items-center space-x-3"},re={key:0,class:"space-y-4"},ne={class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3"},oe={class:"text-sm text-red-700 dark:text-red-300"},de={class:"max-h-48 overflow-y-auto mt-2"},ie={class:"text-sm text-gray-600 dark:text-gray-400 list-disc pl-5"},ke=M({__name:"Index",props:{departments:{}},setup(ue){const N=[{title:"Human Resource",href:o("dashboard")},{title:"Departments",href:o("departments.index")}],y=[C.id(),w("name","Name",{sortable:!0,searchable:!0,class:"font-semibold"}),w("description","Description",{sortable:!1,searchable:!0,render:s=>s?.length>80?s.slice(0,80)+"...":s??"-",class:"text-gray-600 dark:text-gray-400"}),C.createdAt()],{handleSearch:T,handleSort:R,handlePageChange:V,handleFilter:E,clearFilters:I,refresh:_,loading:O}=X({baseRoute:o("departments.index"),defaultSort:{field:"name",order:"asc"},defaultPerPage:10,columns:y.map(s=>({key:s.key,sortable:s.sortable,searchable:s.searchable}))}),c=g(!1),i=g(null),k=G({}),U=s=>{i.value=s,c.value=!0},j=()=>{i.value&&k.delete(o("departments.destroy",i.value.id),{onBefore:()=>{c.value=!1,i.value=null},onSuccess:()=>_()})},p=g(!1),u=g([]),q=({action:s,selectedRows:t})=>{s==="delete"&&(u.value=t,p.value=!0)},z=()=>{const s=u.value.map(t=>t.id);h.post(o("departments.bulk-destroy"),{ids:s},{onSuccess:()=>{p.value=!1,u.value=[],_()}})},H=[{icon:te,variant:"outline",tooltip:"Edit department",onClick:s=>{h.visit(o("departments.edit",s.id))},class:"text-green-600 hover:text-green-700 border-green-200 hover:border-green-300"},{icon:m,variant:"destructive",tooltip:"Delete department",onClick:U,class:"text-red-600 hover:text-red-700"}],L=[{label:"Delete Selected",action:"delete",icon:m}];return J(),(s,t)=>(x(),v(D,null,[a(e(K),{title:"Departments"}),a(Z,{breadcrumbs:N},{default:l(()=>[r("div",ae,[r("div",se,[t[6]||(t[6]=r("div",null,[r("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Departments "),r("p",{class:"text-gray-600 dark:text-gray-400"}," Manage departments in your organization. ")],-1)),r("div",le,[a(e(f),{onClick:t[0]||(t[0]=n=>e(h).visit(e(o)("departments.create"))),class:"flex items-center space-x-2"},{default:l(()=>[a(e(ee),{class:"w-4 h-4"}),t[5]||(t[5]=r("span",null,"Add Department",-1))]),_:1})])]),a(Y,{data:s.departments.data,columns:y,actions:H,"total-records":s.departments.total,loading:e(O),"current-page":s.departments.current_page,"default-rows-per-page":10,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple","bulk-actions":L,onSearch:e(T),onSort:e(R),onPageChange:e(V),onFilter:e(E),onClearFilters:e(I),onRefresh:e(_),onBulkAction:q},null,8,["data","total-records","loading","current-page","onSearch","onSort","onPageChange","onFilter","onClearFilters","onRefresh"]),a(e(S),{open:c.value,"onUpdate:open":t[2]||(t[2]=n=>c.value=n)},{default:l(()=>[a(e($),{class:"sm:max-w-md"},{default:l(()=>[a(e(F),null,{default:l(()=>[a(e(P),{class:"flex items-center space-x-2"},{default:l(()=>[a(e(m),{class:"w-5 h-5 text-red-500"}),t[7]||(t[7]=r("span",null,"Delete Department",-1))]),_:1}),a(e(A),null,{default:l(()=>[...t[8]||(t[8]=[d(" Are you sure you want to delete this department? It will be moved to trash. ",-1)])]),_:1})]),_:1}),i.value?(x(),v("div",re,[r("div",ne,[r("div",oe,[r("strong",null,b(i.value.name),1),t[9]||(t[9]=d(" will be moved to trash. ",-1))])])])):Q("",!0),a(e(B),{class:"space-x-2"},{default:l(()=>[a(e(f),{variant:"outline",onClick:t[1]||(t[1]=n=>c.value=!1)},{default:l(()=>[...t[10]||(t[10]=[d("Cancel",-1)])]),_:1}),a(e(f),{variant:"destructive",onClick:j,loading:e(k).processing},{default:l(()=>[a(e(m),{class:"w-4 h-4 mr-2"}),t[11]||(t[11]=d(" Delete ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),a(e(S),{open:p.value,"onUpdate:open":t[4]||(t[4]=n=>p.value=n)},{default:l(()=>[a(e($),{class:"sm:max-w-lg"},{default:l(()=>[a(e(F),null,{default:l(()=>[a(e(P),{class:"flex items-center space-x-2"},{default:l(()=>[a(e(m),{class:"w-5 h-5 text-red-500"}),t[12]||(t[12]=r("span",null,"Delete Selected Departments",-1))]),_:1}),a(e(A),null,{default:l(()=>[d(" Are you sure you want to delete "+b(u.value.length)+" selected departments? ",1)]),_:1})]),_:1}),r("div",de,[r("ul",ie,[(x(!0),v(D,null,W(u.value,n=>(x(),v("li",{key:n.id},b(n.name),1))),128))])]),a(e(B),{class:"space-x-2"},{default:l(()=>[a(e(f),{variant:"outline",onClick:t[3]||(t[3]=n=>p.value=!1)},{default:l(()=>[...t[13]||(t[13]=[d("Cancel",-1)])]),_:1}),a(e(f),{variant:"destructive",onClick:z,loading:e(k).processing},{default:l(()=>[a(e(m),{class:"w-4 h-4 mr-2"}),d(" Delete All ("+b(u.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{ke as default};
