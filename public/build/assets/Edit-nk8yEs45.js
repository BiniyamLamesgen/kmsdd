import{d as w,s as x,u as N,l as T,m as h,c as p,o as m,a as o,b as e,h as B,w as d,e as r,f as l,g as D,j as F,i as c,n as u,F as k,r as P,t as _,v as j,k as V}from"./app-CZ_92QqR.js";import{_ as g}from"./index-CTru82cN.js";import{_ as q,a as M,b as z,c as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-DfGcf0Z4.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-CKXr_5eH.js";import{_ as y,a as b}from"./Label.vue_vue_type_script_setup_true_lang-B7j9Y3LL.js";import{_ as I}from"./Textarea.vue_vue_type_script_setup_true_lang-cltZrr1B.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-T57IkxQE.js";import{A as G}from"./arrow-left-B3JA7Mme.js";import{S as H}from"./star-cuxqIf77.js";import{o as J,s as f,u as K,n as O}from"./types-D45As3cg.js";import"./useForwardExpose-4i7abMob.js";import"./VisuallyHidden-pKzkU6Eb.js";const Q={class:"mx-auto max-w-3xl space-y-6 p-6"},W={class:"flex items-center justify-between"},X={class:"flex items-center space-x-4"},Y={class:"space-y-2"},Z=["value"],ee={key:0,class:"text-sm text-red-600"},se={class:"space-y-2"},te={key:0,class:"text-sm text-red-600"},oe={class:"space-y-2"},ie={key:0,class:"text-sm text-red-600"},re={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ae={class:"space-y-2"},ne={key:0,class:"text-sm text-red-600"},de={class:"space-y-2"},le={key:0,class:"text-sm text-red-600"},pe={class:"space-y-2"},me={key:0,class:"text-sm text-red-600"},_e={class:"flex items-center justify-end space-x-4 border-t pt-6"},Ce=w({__name:"Edit",props:{experience:{},employees:{},success:{type:Boolean}},setup(S){const a=S,$=[{title:"Experiences",href:x("experiences.index")},{title:"Edit Experience",href:x("experiences.edit",a.experience.id)}],s=N({_method:"PUT",employee_id:String(a.experience.employee_id||""),company_name:a.experience.company_name||"",position:a.experience.position||"",start_date:a.experience.start_date||"",end_date:a.experience.end_date||"",responsibilities:a.experience.responsibilities||""}),C=n=>`${n.first_name||""} ${n.last_name||""}`.trim();T(()=>{a.experience&&(s.employee_id=String(a.experience.employee_id||""),s.company_name=a.experience.company_name||"",s.position=a.experience.position||"",s.start_date=a.experience.start_date||"",s.end_date=a.experience.end_date||"",s.responsibilities=a.experience.responsibilities||"")}),h(()=>a.experience,n=>{n&&(s.employee_id=String(n.employee_id||""),s.company_name=n.company_name||"",s.position=n.position||"",s.start_date=n.start_date||"",s.end_date=n.end_date||"",s.responsibilities=n.responsibilities||"")});const E=J({employee_id:K([f(),O()]).refine(n=>String(n).length>0,{message:"Employee is required"}),company_name:f().min(1,"Company name is required").max(255),position:f().min(1,"Position is required").max(255),start_date:f().optional(),end_date:f().optional(),responsibilities:f().optional()}),U=()=>{const n=E.safeParse(s.data());if(s.errors={},!n.success){n.error.issues.forEach(t=>{t.path[0]&&(s.errors[t.path[0]]=t.message)});return}s.post(x("experiences.update",a.experience.id),{preserveScroll:!0,onSuccess:()=>{V.visit(x("experiences.index"))},onError:t=>console.log("Form errors:",t)})},v=()=>{V.visit(x("experiences.index"))};return(n,t)=>(m(),p(k,null,[o(e(B),{title:"Edit Experience"}),o(R,{breadcrumbs:$},{default:d(()=>[r("div",Q,[r("div",W,[r("div",X,[o(e(g),{variant:"outline",size:"sm",onClick:v,class:"cursor-pointer"},{default:d(()=>[o(e(G),{class:"mr-2 h-4 w-4"}),t[6]||(t[6]=l(" Back ",-1))]),_:1}),t[7]||(t[7]=r("div",null,[r("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Edit Experience "),r("p",{class:"text-gray-600 dark:text-gray-400"}," Update experience details like company, position, dates, and responsibilities. ")],-1))])]),r("form",{onSubmit:D(U,["prevent"]),class:"space-y-6"},[o(e(q),null,{default:d(()=>[o(e(M),null,{default:d(()=>[o(e(z),{class:"flex items-center space-x-2"},{default:d(()=>[o(e(H),{class:"h-5 w-5"}),t[8]||(t[8]=r("span",null,"Experience Information",-1))]),_:1}),o(e(L),null,{default:d(()=>[...t[9]||(t[9]=[l(" Update the fields below and click save. ",-1)])]),_:1})]),_:1}),o(e(A),{class:"space-y-4"},{default:d(()=>[r("div",Y,[o(e(y),{for:"employee_id"},{default:d(()=>[...t[10]||(t[10]=[l("Employee *",-1)])]),_:1}),F(r("select",{id:"employee_id","onUpdate:modelValue":t[0]||(t[0]=i=>e(s).employee_id=i),class:u(["w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",{"border-red-500":e(s).errors.employee_id}])},[t[11]||(t[11]=r("option",{value:"",disabled:""}," Select employee ",-1)),(m(!0),p(k,null,P(a.employees,i=>(m(),p("option",{key:i.id,value:i.id},_(C(i))+" "+_(i.position?`(${i.position}`:"")+_(i.department?`, ${i.department})`:i.position?")":""),9,Z))),128))],2),[[j,e(s).employee_id]]),e(s).errors.employee_id?(m(),p("p",ee,_(e(s).errors.employee_id),1)):c("",!0)]),r("div",se,[o(e(y),{for:"company_name"},{default:d(()=>[...t[12]||(t[12]=[l("Company Name *",-1)])]),_:1}),o(e(b),{id:"company_name",modelValue:e(s).company_name,"onUpdate:modelValue":t[1]||(t[1]=i=>e(s).company_name=i),placeholder:"Company name",class:u({"border-red-500":e(s).errors.company_name})},null,8,["modelValue","class"]),e(s).errors.company_name?(m(),p("p",te,_(e(s).errors.company_name),1)):c("",!0)]),r("div",oe,[o(e(y),{for:"position"},{default:d(()=>[...t[13]||(t[13]=[l("Position *",-1)])]),_:1}),o(e(b),{id:"position",modelValue:e(s).position,"onUpdate:modelValue":t[2]||(t[2]=i=>e(s).position=i),placeholder:"Position",class:u({"border-red-500":e(s).errors.position})},null,8,["modelValue","class"]),e(s).errors.position?(m(),p("p",ie,_(e(s).errors.position),1)):c("",!0)]),r("div",re,[r("div",ae,[o(e(y),{for:"start_date"},{default:d(()=>[...t[14]||(t[14]=[l("Start Date",-1)])]),_:1}),o(e(b),{id:"start_date",modelValue:e(s).start_date,"onUpdate:modelValue":t[3]||(t[3]=i=>e(s).start_date=i),type:"date",class:u({"border-red-500":e(s).errors.start_date})},null,8,["modelValue","class"]),e(s).errors.start_date?(m(),p("p",ne,_(e(s).errors.start_date),1)):c("",!0)]),r("div",de,[o(e(y),{for:"end_date"},{default:d(()=>[...t[15]||(t[15]=[l("End Date",-1)])]),_:1}),o(e(b),{id:"end_date",modelValue:e(s).end_date,"onUpdate:modelValue":t[4]||(t[4]=i=>e(s).end_date=i),type:"date",class:u({"border-red-500":e(s).errors.end_date})},null,8,["modelValue","class"]),e(s).errors.end_date?(m(),p("p",le,_(e(s).errors.end_date),1)):c("",!0)])]),r("div",pe,[o(e(y),{for:"responsibilities"},{default:d(()=>[...t[16]||(t[16]=[l("Responsibilities",-1)])]),_:1}),o(e(I),{id:"responsibilities",modelValue:e(s).responsibilities,"onUpdate:modelValue":t[5]||(t[5]=i=>e(s).responsibilities=i),rows:"5",placeholder:"Describe your responsibilities",class:u({"border-red-500":e(s).errors.responsibilities})},null,8,["modelValue","class"]),e(s).errors.responsibilities?(m(),p("p",me,_(e(s).errors.responsibilities),1)):c("",!0)])]),_:1})]),_:1}),r("div",_e,[o(e(g),{type:"button",variant:"outline",onClick:v,class:"cursor-pointer"},{default:d(()=>[...t[17]||(t[17]=[l(" Cancel ",-1)])]),_:1}),o(e(g),{type:"submit",loading:e(s).processing,class:"cursor-pointer"},{default:d(()=>[...t[18]||(t[18]=[l(" Update Experience ",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{Ce as default};
