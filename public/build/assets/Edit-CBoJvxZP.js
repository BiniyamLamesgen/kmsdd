import{d as V,s as p,u as j,l as D,m as q,c as m,o as i,a as d,b as t,h as F,w as n,e as r,A as x,i as u,f as a,t as o,g as I,n as T,F as U,k as w}from"./app-B8cnIyhQ.js";import{_ as v}from"./index-C4qItS30.js";import{_ as y,a as f,b as c,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-C1LfM9oQ.js";import{_ as k}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bm2-B4Cb.js";import{_ as g,a as A}from"./Label.vue_vue_type_script_setup_true_lang-TEKdcw0c.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-KgpCTNUL.js";import{A as M}from"./arrow-left-ayoWbgUT.js";import{B as P}from"./badge-check-Ce6vGFP4.js";import{o as K,s as L,n as E}from"./types-D45As3cg.js";import"./useForwardExpose-BKx_IIGC.js";import"./VisuallyHidden-DfpOj_YV.js";const G={class:"max-w-3xl space-y-6 p-6"},H={class:"flex items-center justify-between"},J={class:"flex items-center space-x-4"},O=["src"],Q={class:"font-semibold"},R={class:"text-sm text-gray-600"},W={class:"text-xs text-gray-500"},X={class:"font-semibold"},Y=["src"],Z={class:"font-semibold"},ee={class:"text-sm text-gray-600"},se={class:"text-xs text-gray-500"},te={class:"space-y-2"},de={key:0,class:"text-sm text-red-600"},ne={class:"space-y-2"},re={class:"w-full rounded border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},oe={key:0},le={key:1},ae={class:"space-y-2"},ie={class:"w-full rounded border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},me={key:0},_e={key:1},pe={class:"space-y-2"},ue={class:"w-full rounded border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},ye={key:0},fe={key:1},ce={class:"flex items-center justify-end space-x-4 border-t pt-6"},Ce=V({__name:"Edit",props:{endorsement:{}},setup(S){const e=S,$=[{title:"Kms",href:p("dashboard")},{title:"Endorsements",href:p("endorsements.index")},{title:"Edit Endorsement",href:p("endorsements.edit",e.endorsement.id)}],l=j({employee_id:0,skill_id:0,endorsed_by:0,endorsement_date:""});D(()=>{e.endorsement&&(l.employee_id=e.endorsement.employee_id,l.skill_id=e.endorsement.skill_id,l.endorsed_by=e.endorsement.endorsed_by.id,l.endorsement_date=e.endorsement.endorsement_date??"")}),q(()=>e.endorsement,_=>{_&&(l.employee_id=_.employee_id,l.skill_id=_.skill_id,l.endorsed_by=_.endorsed_by.id,l.endorsement_date=_.endorsement_date??"")});const B=K({employee_id:E().int().min(1,"Employee is required"),skill_id:E().int().min(1,"Skill is required"),endorsed_by:E().int().min(1,"Endorser is required"),endorsement_date:L().min(1,"Endorsement date is required")}),C=()=>{const _=B.safeParse({employee_id:Number(l.employee_id),skill_id:Number(l.skill_id),endorsed_by:Number(l.endorsed_by),endorsement_date:l.endorsement_date});if(l.errors={},!_.success){_.error.issues.forEach(s=>{s.path[0]&&(l.errors[s.path[0]]=s.message)});return}l.post(p("endorsements.update",e.endorsement.id),{preserveScroll:!0,onSuccess:()=>w.visit(p("endorsements.index")),onError:s=>console.log("Form errors:",s)})},h=()=>{w.visit(p("endorsements.index"))};return(_,s)=>(i(),m(U,null,[d(t(F),{title:"Edit Endorsement"}),d(z,{breadcrumbs:$},{default:n(()=>[r("div",G,[r("div",H,[r("div",J,[d(t(v),{variant:"outline",size:"sm",onClick:h,class:"cursor-pointer"},{default:n(()=>[d(t(M),{class:"mr-2 h-4 w-4"}),s[1]||(s[1]=a(" Back ",-1))]),_:1}),s[2]||(s[2]=r("div",null,[r("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Edit Endorsement "),r("p",{class:"text-gray-600 dark:text-gray-400"}," Update endorsement details for this employee and skill. ")],-1))])]),e.endorsement.employee?(i(),x(t(y),{key:0},{default:n(()=>[d(t(f),null,{default:n(()=>[d(t(c),{class:"flex items-center gap-2"},{default:n(()=>[...s[3]||(s[3]=[a(" Employee ",-1)])]),_:1}),d(t(k),null,{default:n(()=>[...s[4]||(s[4]=[a(" Endorsed employee: ",-1)])]),_:1})]),_:1}),d(t(b),{class:"flex items-center gap-4"},{default:n(()=>[e.endorsement.employee.profile_picture?(i(),m("img",{key:0,src:`${e.endorsement.employee.profile_picture}`,alt:"Profile",class:"h-12 w-12 rounded-full object-cover border"},null,8,O)):u("",!0),r("div",null,[r("div",Q,o(e.endorsement.employee.first_name)+" "+o(e.endorsement.employee.last_name),1),r("div",R,o(e.endorsement.employee.position)+" - "+o(e.endorsement.employee.department),1),r("div",W,o(e.endorsement.employee.email),1)])]),_:1})]),_:1})):u("",!0),e.endorsement.skill?(i(),x(t(y),{key:1},{default:n(()=>[d(t(f),null,{default:n(()=>[d(t(c),{class:"flex items-center gap-2"},{default:n(()=>[d(t(P),{class:"h-5 w-5"}),s[5]||(s[5]=a(" Skill ",-1))]),_:1}),d(t(k),null,{default:n(()=>[...s[6]||(s[6]=[a(" Skill endorsed: ",-1)])]),_:1})]),_:1}),d(t(b),null,{default:n(()=>[r("div",X,o(e.endorsement.skill.skill_name),1)]),_:1})]),_:1})):u("",!0),e.endorsement.endorsed_by?(i(),x(t(y),{key:2},{default:n(()=>[d(t(f),null,{default:n(()=>[d(t(c),{class:"flex items-center gap-2"},{default:n(()=>[...s[7]||(s[7]=[a(" Endorsed By ",-1)])]),_:1}),d(t(k),null,{default:n(()=>[...s[8]||(s[8]=[a(" Endorser details: ",-1)])]),_:1})]),_:1}),d(t(b),{class:"flex items-center gap-4"},{default:n(()=>[e.endorsement.endorsed_by.profile_picture?(i(),m("img",{key:0,src:`${e.endorsement.endorsed_by.profile_picture}`,alt:"Endorser",class:"h-12 w-12 rounded-full object-cover border"},null,8,Y)):u("",!0),r("div",null,[r("div",Z,o(e.endorsement.endorsed_by.first_name)+" "+o(e.endorsement.endorsed_by.last_name),1),r("div",ee,o(e.endorsement.endorsed_by.position)+" - "+o(e.endorsement.endorsed_by.department),1),r("div",se,o(e.endorsement.endorsed_by.email),1)])]),_:1})]),_:1})):u("",!0),r("form",{onSubmit:I(C,["prevent"]),class:"space-y-6"},[d(t(y),null,{default:n(()=>[d(t(f),null,{default:n(()=>[d(t(c),{class:"flex items-center space-x-2"},{default:n(()=>[...s[9]||(s[9]=[r("span",null,"Endorsement Information",-1)])]),_:1}),d(t(k),null,{default:n(()=>[...s[10]||(s[10]=[a(" Update the fields below and click save. ",-1)])]),_:1})]),_:1}),d(t(b),{class:"space-y-4"},{default:n(()=>[r("div",te,[d(t(g),{for:"endorsement_date"},{default:n(()=>[...s[11]||(s[11]=[a("Endorsement Date *",-1)])]),_:1}),d(t(A),{id:"endorsement_date",type:"date",modelValue:t(l).endorsement_date,"onUpdate:modelValue":s[0]||(s[0]=N=>t(l).endorsement_date=N),class:T({"border-red-500":t(l).errors.endorsement_date})},null,8,["modelValue","class"]),t(l).errors.endorsement_date?(i(),m("p",de,o(t(l).errors.endorsement_date),1)):u("",!0)]),r("div",ne,[d(t(g),null,{default:n(()=>[...s[12]||(s[12]=[a("Employee",-1)])]),_:1}),r("div",re,[e.endorsement.employee?(i(),m("span",oe,o(e.endorsement.employee.first_name)+" "+o(e.endorsement.employee.last_name)+" ("+o(e.endorsement.employee.position)+", "+o(e.endorsement.employee.department)+") ",1)):(i(),m("span",le," Employee ID: "+o(e.endorsement.employee_id),1))])]),r("div",ae,[d(t(g),null,{default:n(()=>[...s[13]||(s[13]=[a("Skill",-1)])]),_:1}),r("div",ie,[e.endorsement.skill?(i(),m("span",me,o(e.endorsement.skill.skill_name),1)):(i(),m("span",_e," Skill ID: "+o(e.endorsement.skill_id),1))])]),r("div",pe,[d(t(g),null,{default:n(()=>[...s[14]||(s[14]=[a("Endorsed By",-1)])]),_:1}),r("div",ue,[e.endorsement.endorsed_by?(i(),m("span",ye,o(e.endorsement.endorsed_by.first_name)+" "+o(e.endorsement.endorsed_by.last_name)+" ("+o(e.endorsement.endorsed_by.position)+", "+o(e.endorsement.endorsed_by.department)+") ",1)):(i(),m("span",fe," Endorser ID: "+o(t(l).endorsed_by),1))])])]),_:1})]),_:1}),r("div",ce,[d(t(v),{type:"button",variant:"outline",onClick:h,class:"cursor-pointer"},{default:n(()=>[...s[15]||(s[15]=[a("Cancel",-1)])]),_:1}),d(t(v),{type:"submit",loading:t(l).processing,class:"cursor-pointer"},{default:n(()=>[...s[16]||(s[16]=[a("Update Endorsement",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{Ce as default};
