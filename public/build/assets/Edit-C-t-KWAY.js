import{d as $,s as u,u as E,l as D,m as T,c as p,o as c,a as r,b as e,h as U,w as d,e as i,f as n,g as A,i as f,n as _,t as m,j as M,F as w,r as N,v as j,k as h}from"./app-B8cnIyhQ.js";import{_ as x}from"./index-C4qItS30.js";import{_ as B,a as F,b as Y,c as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-C1LfM9oQ.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bm2-B4Cb.js";import{_ as y,a as g}from"./Label.vue_vue_type_script_setup_true_lang-TEKdcw0c.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-KgpCTNUL.js";import{A as I}from"./arrow-left-ayoWbgUT.js";import{C as P}from"./clock-DwYDTxJn.js";import{o as G,u as H,s as v,n as J}from"./types-D45As3cg.js";import"./useForwardExpose-BKx_IIGC.js";import"./VisuallyHidden-DfpOj_YV.js";const K={class:"mx-auto max-w-3xl space-y-6 p-6"},O={class:"flex items-center justify-between"},Q={class:"flex items-center space-x-4"},R={class:"space-y-2"},W={key:0,class:"text-sm text-red-600"},X={class:"space-y-2"},Z={key:0,class:"text-sm text-red-600"},ee={class:"space-y-2"},te={key:0,class:"text-sm text-red-600"},se={class:"space-y-2"},ae=["value"],re={key:0,class:"text-sm text-red-600"},ie={class:"flex items-center justify-end space-x-4 border-t pt-6"},ve=$({__name:"Edit",props:{achievement:{},employees:{}},setup(k){const l=k,V=[{title:"Achievements",href:u("achievements.index")},{title:"Edit",href:""}],t=E({title:"",description:"",date_awarded:"",employee_id:""});D(()=>{l.achievement&&(t.title=l.achievement.title??"",t.description=l.achievement.description??"",t.date_awarded=l.achievement.date_awarded??"",t.employee_id=String(l.achievement.employee_id??""))}),T(()=>l.achievement,o=>{o&&(t.title=o.title??"",t.description=o.description??"",t.date_awarded=o.date_awarded??"",t.employee_id=String(o.employee_id??""))});const S=G({title:v().min(1,"Title is required").max(255),description:v().max(5e3).optional(),date_awarded:v().optional().refine(o=>!o||/^\d{4}-\d{2}-\d{2}$/.test(o),{message:"Date awarded must be a valid date (YYYY-MM-DD)"}),employee_id:H([v(),J()]).refine(o=>String(o).length>0,{message:"Employee is required"})}),C=()=>{const o=S.safeParse(t.data());if(t.errors={},!o.success){o.error.issues.forEach(a=>{a.path[0]&&(t.errors[a.path[0]]=a.message)});return}const s={...t.data(),employee_id:Number(t.employee_id)};t.post(u("achievements.update",l.achievement.id),{...s,preserveScroll:!0,onSuccess:()=>h.visit(u("achievements.index")),onError:a=>console.log("Form errors:",a)})},b=()=>{h.visit(u("achievements.index"))};return(o,s)=>(c(),p(w,null,[r(e(U),{title:"Edit Achievement"}),r(L,{breadcrumbs:V},{default:d(()=>[i("div",K,[i("div",O,[i("div",Q,[r(e(x),{variant:"outline",size:"sm",onClick:b,class:"cursor-pointer"},{default:d(()=>[r(e(I),{class:"mr-2 h-4 w-4"}),s[4]||(s[4]=n(" Back ",-1))]),_:1}),s[5]||(s[5]=i("div",null,[i("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Edit Achievement "),i("p",{class:"text-gray-600 dark:text-gray-400"}," Update achievement details like title, description, date, and employee. ")],-1))])]),i("form",{onSubmit:A(C,["prevent"]),class:"space-y-6"},[r(e(B),null,{default:d(()=>[r(e(F),null,{default:d(()=>[r(e(Y),{class:"flex items-center space-x-2"},{default:d(()=>[r(e(P),{class:"h-5 w-5"}),s[6]||(s[6]=i("span",null,"Achievement Information",-1))]),_:1}),r(e(z),null,{default:d(()=>[...s[7]||(s[7]=[n("Update the fields below and click save.",-1)])]),_:1})]),_:1}),r(e(q),{class:"space-y-4"},{default:d(()=>[i("div",R,[r(e(y),{for:"title"},{default:d(()=>[...s[8]||(s[8]=[n("Title *",-1)])]),_:1}),r(e(g),{id:"title",modelValue:e(t).title,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).title=a),placeholder:"Achievement title",class:_({"border-red-500":e(t).errors.title})},null,8,["modelValue","class"]),e(t).errors.title?(c(),p("p",W,m(e(t).errors.title),1)):f("",!0)]),i("div",X,[r(e(y),{for:"description"},{default:d(()=>[...s[9]||(s[9]=[n("Description",-1)])]),_:1}),r(e(g),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).description=a),placeholder:"Achievement description",class:_({"border-red-500":e(t).errors.description})},null,8,["modelValue","class"]),e(t).errors.description?(c(),p("p",Z,m(e(t).errors.description),1)):f("",!0)]),i("div",ee,[r(e(y),{for:"date_awarded"},{default:d(()=>[...s[10]||(s[10]=[n("Date Awarded",-1)])]),_:1}),r(e(g),{id:"date_awarded",type:"date",modelValue:e(t).date_awarded,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).date_awarded=a),class:_({"border-red-500":e(t).errors.date_awarded})},null,8,["modelValue","class"]),e(t).errors.date_awarded?(c(),p("p",te,m(e(t).errors.date_awarded),1)):f("",!0)]),i("div",se,[r(e(y),{for:"employee_id"},{default:d(()=>[...s[11]||(s[11]=[n("Employee *",-1)])]),_:1}),M(i("select",{id:"employee_id","onUpdate:modelValue":s[3]||(s[3]=a=>e(t).employee_id=a),class:_(["w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",{"border-red-500":e(t).errors.employee_id}])},[s[12]||(s[12]=i("option",{value:"",disabled:""}," Select employee ",-1)),(c(!0),p(w,null,N(l.employees,a=>(c(),p("option",{key:a.id,value:a.id},m(a.first_name)+" "+m(a.last_name)+" ("+m(a.position)+", "+m(a.department)+") ",9,ae))),128))],2),[[j,e(t).employee_id]]),e(t).errors.employee_id?(c(),p("p",re,m(e(t).errors.employee_id),1)):f("",!0)])]),_:1})]),_:1}),i("div",ie,[r(e(x),{type:"button",variant:"outline",onClick:b,class:"cursor-pointer"},{default:d(()=>[...s[13]||(s[13]=[n("Cancel",-1)])]),_:1}),r(e(x),{type:"submit",loading:e(t).processing,class:"cursor-pointer"},{default:d(()=>[...s[14]||(s[14]=[n("Update Achievement",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{ve as default};
