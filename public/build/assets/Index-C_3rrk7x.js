import{d as Q,s as c,p as h,u as W,q as D,k as b,c as g,o as k,a as s,b as t,h as X,w as l,e as a,i as Z,f as m,t as i,F as S,r as ee}from"./app-CZ_92QqR.js";import{u as te,c as v,T as u,_ as ae}from"./useServerDataTable-NCLCFBSb.js";import{_}from"./index-CTru82cN.js";import{_ as A,a as $,b as F,c as T,d as E,e as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-5Sa-XXAZ.js";import{_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-T57IkxQE.js";import{E as le}from"./eye-BvfQvPh6.js";import{S as ne}from"./square-pen-C2muAAH8.js";import{P as re}from"./plus-Y4C7Mf4N.js";import"./VisuallyHidden-pKzkU6Eb.js";import"./useForwardExpose-4i7abMob.js";const oe={class:"space-y-6 p-6"},ie={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},de={class:"flex items-center space-x-0 sm:space-x-3"},ue={key:0,class:"space-y-4"},ce={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},me={class:"flex items-start space-x-2"},ve={class:"text-sm text-red-700 dark:text-red-300"},fe={class:"text-xs"},pe={class:"text-xs"},xe={class:"text-xs"},he={class:"space-y-4"},_e={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},be={class:"flex items-start space-x-2"},ge={class:"text-sm text-red-700 dark:text-red-300"},ke={class:"max-h-32 overflow-y-auto text-sm text-gray-600 dark:text-gray-400"},ye={class:"mt-1 space-y-1"},Be=Q({__name:"Index",props:{achievements:{}},setup(B){const f=B,V=[{title:"Achievements",href:c("achievements.index")}],{handleSearch:I,handleSort:N,handlePageChange:R,handleFilter:M,clearFilters:j,refresh:y,loading:q}=te({baseRoute:c("achievements.index"),defaultSort:{field:"date_awarded",order:"desc"},defaultPerPage:15}),C=h([]),o=h(null),p=h(!1),x=h(!1),d=h([]),w=W({}),O=D(()=>[v("title","Title",{sortable:!0,searchable:!0}),v("description","Description",{sortable:!1,searchable:!0}),v("employee","Employee",{sortable:!1,searchable:!1,render:n=>n?`${n.first_name} ${n.last_name}`:""}),v("achievement_year","Year",{sortable:!0,searchable:!1}),v("formatted_date","Date Awarded",{sortable:!0,searchable:!1}),v("time_since_awarded","Time Since Awarded",{sortable:!1,searchable:!1})]),U=D(()=>[{label:"View",icon:le,variant:"outline",tooltip:"View achievement",onClick:n=>b.visit(c("achievements.show",n.id))},{label:"Edit",icon:ne,variant:"outline",tooltip:"Edit achievement",onClick:n=>b.visit(c("achievements.edit",n.id)),class:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300"},{label:"Delete",icon:u,variant:"destructive",tooltip:"Delete achievement",onClick:n=>L(n.id),class:"text-red-600 hover:text-red-700"}]),z=D(()=>[{label:"Delete Selected",action:"delete",icon:u,variant:"destructive"}]);function L(n){const e=f.achievements.data.find(r=>r.id===n);e&&(o.value=e,p.value=!0)}const Y=()=>{C.value=[],y()},G=()=>{j(),C.value=[]};function H(){o.value&&w.delete(c("achievements.destroy",o.value.id),{preserveScroll:!0,onSuccess:()=>{p.value=!1,o.value=null,y()}})}function J(){d.value.length!==0&&b.post(c("achievements.bulk-destroy"),{ids:d.value.map(n=>n.id)},{preserveScroll:!0,onSuccess:()=>{x.value=!1,d.value=[],y()}})}const K=n=>{d.value=n.selectedRows,n.action==="delete"&&(x.value=!0)};return(n,e)=>(k(),g(S,null,[s(t(X),{title:"Achievements Management"}),s(se,{breadcrumbs:V},{default:l(()=>[a("div",oe,[a("div",ie,[e[6]||(e[6]=a("div",null,[a("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Achievements "),a("p",{class:"text-gray-600 dark:text-gray-400"}," Manage organization achievements and their details. ")],-1)),a("div",de,[s(t(_),{onClick:e[0]||(e[0]=r=>t(b).visit(t(c)("achievements.create"))),class:"flex w-full cursor-pointer items-center justify-center space-x-2 sm:w-auto"},{default:l(()=>[s(t(re),{class:"h-4 w-4"}),e[5]||(e[5]=a("span",null,"Create Achievement",-1))]),_:1})])]),a("div",null,[s(ae,{data:f.achievements.data,columns:O.value,actions:U.value,"bulk-actions":z.value,"total-records":f.achievements.meta.count,"current-page":f.achievements.meta.current_page,loading:t(q),"default-rows-per-page":f.achievements.meta.per_page,searchable:"",sortable:"",paginator:"",filterable:"",exportable:"","selection-mode":"multiple",onSearch:t(I),onSort:t(N),onPageChange:t(R),onFilter:t(M),onClearFilters:G,onRefresh:Y,onBulkAction:K},null,8,["data","columns","actions","bulk-actions","total-records","current-page","loading","default-rows-per-page","onSearch","onSort","onPageChange","onFilter"])]),a("div",null,[s(t(A),{open:p.value,"onUpdate:open":e[2]||(e[2]=r=>p.value=r)},{default:l(()=>[s(t($),{class:"sm:max-w-md"},{default:l(()=>[s(t(F),null,{default:l(()=>[s(t(T),{class:"flex items-center space-x-2"},{default:l(()=>[s(t(u),{class:"h-5 w-5 text-red-500"}),e[7]||(e[7]=a("span",null,"Delete Achievement",-1))]),_:1}),s(t(E),null,{default:l(()=>[...e[8]||(e[8]=[m(" Are you sure you want to delete this achievement? This action cannot be undone. ",-1)])]),_:1})]),_:1}),o.value?(k(),g("div",ue,[a("div",ce,[a("div",me,[s(t(u),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),a("div",ve,[a("strong",null,i(o.value.title),1),e[9]||(e[9]=a("br",null,null,-1)),a("span",fe,"Employee: "+i(o.value.employee?o.value.employee.first_name+" "+o.value.employee.last_name:""),1),e[10]||(e[10]=a("br",null,null,-1)),a("span",pe,"Date: "+i(o.value.formatted_date),1),e[11]||(e[11]=a("br",null,null,-1)),a("span",xe,"Description: "+i(o.value.description),1)])])])])):Z("",!0),s(t(P),{class:"space-x-2"},{default:l(()=>[s(t(_),{variant:"outline",onClick:e[1]||(e[1]=r=>p.value=!1),class:"cursor-pointer"},{default:l(()=>[...e[12]||(e[12]=[m("Cancel",-1)])]),_:1}),s(t(_),{variant:"destructive",onClick:H,loading:t(w).processing,class:"cursor-pointer"},{default:l(()=>[s(t(u),{class:"mr-2 h-4 w-4"}),e[13]||(e[13]=m(" Delete Achievement ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]),s(t(A),{open:x.value,"onUpdate:open":e[4]||(e[4]=r=>x.value=r)},{default:l(()=>[s(t($),{class:"sm:max-w-lg"},{default:l(()=>[s(t(F),null,{default:l(()=>[s(t(T),{class:"flex items-center space-x-2"},{default:l(()=>[s(t(u),{class:"h-5 w-5 text-red-500"}),e[14]||(e[14]=a("span",null,"Delete Multiple Achievements",-1))]),_:1}),s(t(E),null,{default:l(()=>[m(" Are you sure you want to delete "+i(d.value.length)+" selected achievements? This action cannot be undone. ",1)]),_:1})]),_:1}),a("div",he,[a("div",_e,[a("div",be,[s(t(u),{class:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),a("div",ge,[a("strong",null,i(d.value.length)+" achievements",1),e[15]||(e[15]=m(" will be permanently deleted. ",-1))])])]),a("div",ke,[e[16]||(e[16]=a("strong",null,"Achievements to be deleted:",-1)),a("ul",ye,[(k(!0),g(S,null,ee(d.value,r=>(k(),g("li",{key:r.id}," â€¢ "+i(r.title)+" (Employee: "+i(r.employee?r.employee.first_name+" "+r.employee.last_name:"")+", Date: "+i(r.formatted_date)+") ",1))),128))])])]),s(t(P),{class:"space-x-2"},{default:l(()=>[s(t(_),{variant:"outline",onClick:e[3]||(e[3]=r=>x.value=!1),class:"cursor-pointer"},{default:l(()=>[...e[17]||(e[17]=[m("Cancel",-1)])]),_:1}),s(t(_),{variant:"destructive",onClick:J,loading:t(w).processing,class:"cursor-pointer"},{default:l(()=>[s(t(u),{class:"mr-2 h-4 w-4"}),m(" Delete All ("+i(d.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1})],64))}});export{Be as default};
