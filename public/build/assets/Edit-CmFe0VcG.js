import{d as U,s as y,u as j,l as F,m as I,c as m,o as d,a as s,b as l,h as P,w as t,e as i,A as E,i as c,f as a,t as n,g as T,n as h,F as A,k as w}from"./app-WCoSBNF8.js";import{_}from"./index-gtYP4Z27.js";import{_ as k,a as x,b as v,c as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-CqPOizUP.js";import{_ as S}from"./CardDescription.vue_vue_type_script_setup_true_lang-BsvAwo7b.js";import{_ as u,a as C}from"./Label.vue_vue_type_script_setup_true_lang-DA93N1nt.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-BkSasf_i.js";import{A as z}from"./arrow-left-BmVZzzhP.js";import{B as L}from"./badge-check-CJHk74DY.js";import{o as M,n as q,s as G}from"./types-D45As3cg.js";import"./useForwardExpose-j55gvhwt.js";import"./VisuallyHidden-CkRoF75v.js";const H={class:"mx-auto max-w-3xl space-y-6 p-6"},J={class:"flex items-center justify-between"},K={class:"flex items-center space-x-4"},O=["src"],Q={class:"font-semibold"},R={class:"text-sm text-gray-600"},W={class:"text-xs text-gray-500"},X={class:"font-semibold"},Y={class:"space-y-2"},Z={key:0,class:"text-sm text-red-600"},ee={class:"space-y-2"},le={key:0,class:"text-sm text-red-600"},se={class:"space-y-2"},oe={class:"w-full rounded border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},te={key:0},re={key:1},ie={class:"space-y-2"},ne={class:"w-full rounded border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},ae={key:0},de={key:1},me={class:"flex items-center justify-end space-x-4 border-t pt-6"},be=U({__name:"Edit",props:{employeeSkill:{}},setup(V){const o=V,$=[{title:"Employee Skills",href:y("employee-skills.index")},{title:"Edit",href:""}],r=j({proficiency_level:"",endorsements_count:0});F(()=>{o.employeeSkill&&(r.proficiency_level=o.employeeSkill.proficiency_level??"",r.endorsements_count=o.employeeSkill.endorsements_count??0)}),I(()=>o.employeeSkill,p=>{p&&(r.proficiency_level=p.proficiency_level??"",r.endorsements_count=p.endorsements_count??0)});const B=M({proficiency_level:G().min(1,"Proficiency level is required").max(255),endorsements_count:q().int().min(0,"Endorsements count must be 0 or more")}),N=()=>{const p=B.safeParse({proficiency_level:r.proficiency_level,endorsements_count:Number(r.endorsements_count)});if(r.errors={},!p.success){p.error.issues.forEach(e=>{e.path[0]&&(r.errors[e.path[0]]=e.message)});return}r.post(y("employee-skills.update",o.employeeSkill.id),{preserveScroll:!0,onSuccess:()=>w.visit(y("employee-skills.index")),onError:e=>console.log("Form errors:",e)})},b=()=>{w.visit(y("employee-skills.index"))};return(p,e)=>(d(),m(A,null,[s(l(P),{title:"Edit Employee Skill"}),s(D,{breadcrumbs:$},{default:t(()=>[i("div",H,[i("div",J,[i("div",K,[s(l(_),{variant:"outline",size:"sm",onClick:b,class:"cursor-pointer"},{default:t(()=>[s(l(z),{class:"mr-2 h-4 w-4"}),e[2]||(e[2]=a(" Back ",-1))]),_:1}),e[3]||(e[3]=i("div",null,[i("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Edit Employee Skill "),i("p",{class:"text-gray-600 dark:text-gray-400"}," Update skill proficiency and endorsements for this employee. ")],-1))])]),o.employeeSkill.employee?(d(),E(l(k),{key:0},{default:t(()=>[s(l(x),null,{default:t(()=>[s(l(v),{class:"flex items-center gap-2"},{default:t(()=>[...e[4]||(e[4]=[a(" Employee ",-1)])]),_:1}),s(l(S),null,{default:t(()=>[...e[5]||(e[5]=[a(" Skill assigned to: ",-1)])]),_:1})]),_:1}),s(l(g),{class:"flex items-center gap-4"},{default:t(()=>[o.employeeSkill.employee.profile_picture?(d(),m("img",{key:0,src:`${o.employeeSkill.employee.profile_picture}`,alt:"Profile",class:"h-12 w-12 rounded-full object-cover border"},null,8,O)):c("",!0),i("div",null,[i("div",Q,n(o.employeeSkill.employee.first_name)+" "+n(o.employeeSkill.employee.last_name),1),i("div",R,n(o.employeeSkill.employee.position)+" - "+n(o.employeeSkill.employee.department),1),i("div",W,n(o.employeeSkill.employee.email),1)])]),_:1})]),_:1})):c("",!0),o.employeeSkill.skill?(d(),E(l(k),{key:1},{default:t(()=>[s(l(x),null,{default:t(()=>[s(l(v),{class:"flex items-center gap-2"},{default:t(()=>[s(l(L),{class:"h-5 w-5"}),e[6]||(e[6]=a(" Skill ",-1))]),_:1}),s(l(S),null,{default:t(()=>[...e[7]||(e[7]=[a(" Skill details: ",-1)])]),_:1})]),_:1}),s(l(g),null,{default:t(()=>[i("div",X,n(o.employeeSkill.skill.skill_name),1)]),_:1})]),_:1})):c("",!0),i("form",{onSubmit:T(N,["prevent"]),class:"space-y-6"},[s(l(k),null,{default:t(()=>[s(l(x),null,{default:t(()=>[s(l(v),{class:"flex items-center space-x-2"},{default:t(()=>[...e[8]||(e[8]=[i("span",null,"Skill Information",-1)])]),_:1}),s(l(S),null,{default:t(()=>[...e[9]||(e[9]=[a(" Update the fields below and click save. ",-1)])]),_:1})]),_:1}),s(l(g),{class:"space-y-4"},{default:t(()=>[i("div",Y,[s(l(u),{for:"proficiency_level"},{default:t(()=>[...e[10]||(e[10]=[a("Proficiency Level *",-1)])]),_:1}),s(l(C),{id:"proficiency_level",modelValue:l(r).proficiency_level,"onUpdate:modelValue":e[0]||(e[0]=f=>l(r).proficiency_level=f),placeholder:"e.g. Beginner, Intermediate, Expert",class:h({"border-red-500":l(r).errors.proficiency_level})},null,8,["modelValue","class"]),l(r).errors.proficiency_level?(d(),m("p",Z,n(l(r).errors.proficiency_level),1)):c("",!0)]),i("div",ee,[s(l(u),{for:"endorsements_count"},{default:t(()=>[...e[11]||(e[11]=[a("Endorsements Count",-1)])]),_:1}),s(l(C),{id:"endorsements_count",type:"number",min:"0",modelValue:l(r).endorsements_count,"onUpdate:modelValue":e[1]||(e[1]=f=>l(r).endorsements_count=f),placeholder:"Number of endorsements",class:h({"border-red-500":l(r).errors.endorsements_count})},null,8,["modelValue","class"]),l(r).errors.endorsements_count?(d(),m("p",le,n(l(r).errors.endorsements_count),1)):c("",!0)]),i("div",se,[s(l(u),null,{default:t(()=>[...e[12]||(e[12]=[a("Employee",-1)])]),_:1}),i("div",oe,[o.employeeSkill.employee?(d(),m("span",te,n(o.employeeSkill.employee.first_name)+" "+n(o.employeeSkill.employee.last_name)+" ("+n(o.employeeSkill.employee.position)+", "+n(o.employeeSkill.employee.department)+") ",1)):(d(),m("span",re," Employee ID: "+n(o.employeeSkill.employee_id),1))])]),i("div",ie,[s(l(u),null,{default:t(()=>[...e[13]||(e[13]=[a("Skill",-1)])]),_:1}),i("div",ne,[o.employeeSkill.skill?(d(),m("span",ae,n(o.employeeSkill.skill.skill_name),1)):(d(),m("span",de," Skill ID: "+n(o.employeeSkill.skill_id),1))])])]),_:1})]),_:1}),i("div",me,[s(l(_),{type:"button",variant:"outline",onClick:b,class:"cursor-pointer"},{default:t(()=>[...e[14]||(e[14]=[a("Cancel",-1)])]),_:1}),s(l(_),{type:"submit",loading:l(r).processing,class:"cursor-pointer"},{default:t(()=>[...e[15]||(e[15]=[a("Update Skill",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{be as default};
