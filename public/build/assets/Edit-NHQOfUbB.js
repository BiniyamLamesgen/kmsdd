import{d as P,s as y,u as j,l as N,m as q,c as u,o as m,a as o,b as e,h as A,w as a,e as r,A as F,i as _,f as p,t as d,g as L,n as f,j as M,F as w,r as O,v as z,k as v}from"./app-BtxNwyw2.js";import{_ as k}from"./index-jPyfy9EI.js";import{_ as b,a as S,b as V,c as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-FN0ZLx45.js";import{_ as T}from"./CardDescription.vue_vue_type_script_setup_true_lang-kVO9wE2d.js";import{_ as c,a as h}from"./Label.vue_vue_type_script_setup_true_lang-C-ig4YK4.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-CXKSQ9h2.js";import{A as R}from"./arrow-left-CdviPf8L.js";import{B as G}from"./book-open-DqD2IMiQ.js";import{o as K,u as W,s as g,n as H,l as J}from"./types-D45As3cg.js";import"./useForwardExpose-AmO87qx4.js";import"./VisuallyHidden-DfHmtx4U.js";const Q={class:"mx-auto max-w-3xl space-y-6 p-6"},X={class:"flex items-center justify-between"},Y={class:"flex items-center space-x-4"},Z=["src"],ee={class:"font-semibold"},te={class:"text-sm text-gray-600"},se={class:"text-xs text-gray-500"},oe={class:"space-y-2"},re={key:0,class:"text-sm text-red-600"},le={class:"space-y-2"},ae=["value"],ne={key:0,class:"text-sm text-red-600"},de={class:"space-y-2"},ie={key:0,class:"text-sm text-red-600"},me={class:"space-y-2"},pe={key:0,class:"text-sm text-red-600"},ue={class:"space-y-2"},_e={class:"w-full rounded border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},ce={key:0},ge={key:1},ye={key:0,class:"text-sm text-red-600"},fe={class:"flex items-center justify-end space-x-4 border-t pt-6"},$e=P({__name:"Edit",props:{knowledge_sharing:{},employees:{}},setup(D){const l=D,$=[{title:"Knowledge Sharing",href:y("knowledge-management.index")},{title:"Edit",href:""}],t=j({document_title:"",document_type:"",link:"",date_shared:"",employee_id:""}),B=["Article","Blog","Tutorial","Guide","Documentation","Presentation","Video","Template","Research","Best Practices","Case Study","White Paper","Other"];N(()=>{l.knowledge_sharing&&(t.document_title=l.knowledge_sharing.document_title??"",t.document_type=l.knowledge_sharing.document_type??"",t.link=l.knowledge_sharing.link??"",t.date_shared=l.knowledge_sharing.date_shared??"",t.employee_id=String(l.knowledge_sharing.employee_id??""))}),q(()=>l.knowledge_sharing,i=>{i&&(t.document_title=i.document_title??"",t.document_type=i.document_type??"",t.link=i.link??"",t.date_shared=i.date_shared??"",t.employee_id=String(i.employee_id??""))});const C=K({document_title:g().min(1,"Document title is required").max(255),document_type:g().min(1,"Document type is required").max(100),link:g().url("Please enter a valid URL").optional().or(J("")),date_shared:g().min(1,"Date shared is required"),employee_id:W([g(),H()]).refine(i=>String(i).length>0,{message:"Employee is required"})}),U=()=>{const i=C.safeParse(t.data());if(t.errors={},!i.success){i.error.issues.forEach(n=>{n.path[0]&&(t.errors[n.path[0]]=n.message)});return}const s={...t.data(),employee_id:Number(t.employee_id)};t.post(y("knowledge-management.update",l.knowledge_sharing.id),{...s,preserveScroll:!0,onSuccess:()=>v.visit(y("knowledge-management.index")),onError:n=>console.log("Form errors:",n)})},x=()=>{v.visit(y("knowledge-management.index"))};return(i,s)=>(m(),u(w,null,[o(e(A),{title:"Edit Knowledge Sharing"}),o(I,{breadcrumbs:$},{default:a(()=>[r("div",Q,[r("div",X,[r("div",Y,[o(e(k),{variant:"outline",size:"sm",onClick:x,class:"cursor-pointer"},{default:a(()=>[o(e(R),{class:"mr-2 h-4 w-4"}),s[4]||(s[4]=p(" Back ",-1))]),_:1}),s[5]||(s[5]=r("div",null,[r("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"}," Edit Knowledge Sharing "),r("p",{class:"text-gray-600 dark:text-gray-400"}," Update knowledge sharing details like title, type, link, and date. ")],-1))])]),l.knowledge_sharing.employee?(m(),F(e(b),{key:0},{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(V),{class:"flex items-center gap-2"},{default:a(()=>[...s[6]||(s[6]=[p(" Employee ",-1)])]),_:1}),o(e(T),null,{default:a(()=>[...s[7]||(s[7]=[p(" Knowledge shared by: ",-1)])]),_:1})]),_:1}),o(e(E),{class:"flex items-center gap-4"},{default:a(()=>[l.knowledge_sharing.employee.profile_picture?(m(),u("img",{key:0,src:`/storage/${l.knowledge_sharing.employee.profile_picture}`,alt:"Profile",class:"h-12 w-12 rounded-full object-cover border"},null,8,Z)):_("",!0),r("div",null,[r("div",ee,d(l.knowledge_sharing.employee.first_name)+" "+d(l.knowledge_sharing.employee.last_name),1),r("div",te,d(l.knowledge_sharing.employee.position)+" - "+d(l.knowledge_sharing.employee.department),1),r("div",se,d(l.knowledge_sharing.employee.email),1)])]),_:1})]),_:1})):_("",!0),r("form",{onSubmit:L(U,["prevent"]),class:"space-y-6"},[o(e(b),null,{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(V),{class:"flex items-center space-x-2"},{default:a(()=>[o(e(G),{class:"h-5 w-5"}),s[8]||(s[8]=r("span",null,"Knowledge Information",-1))]),_:1}),o(e(T),null,{default:a(()=>[...s[9]||(s[9]=[p(" Update the fields below and click save. ",-1)])]),_:1})]),_:1}),o(e(E),{class:"space-y-4"},{default:a(()=>[r("div",oe,[o(e(c),{for:"document_title"},{default:a(()=>[...s[10]||(s[10]=[p("Document Title *",-1)])]),_:1}),o(e(h),{id:"document_title",modelValue:e(t).document_title,"onUpdate:modelValue":s[0]||(s[0]=n=>e(t).document_title=n),placeholder:"Enter document title",class:f({"border-red-500":e(t).errors.document_title})},null,8,["modelValue","class"]),e(t).errors.document_title?(m(),u("p",re,d(e(t).errors.document_title),1)):_("",!0)]),r("div",le,[o(e(c),{for:"document_type"},{default:a(()=>[...s[11]||(s[11]=[p("Document Type *",-1)])]),_:1}),M(r("select",{id:"document_type","onUpdate:modelValue":s[1]||(s[1]=n=>e(t).document_type=n),class:f(["w-full rounded border px-3 py-2",e(t).errors.document_type?"border-red-500":"border-gray-300"])},[s[12]||(s[12]=r("option",{value:""},"Select document type",-1)),(m(),u(w,null,O(B,n=>r("option",{key:n,value:n},d(n),9,ae)),64))],2),[[z,e(t).document_type]]),e(t).errors.document_type?(m(),u("p",ne,d(e(t).errors.document_type),1)):_("",!0)]),r("div",de,[o(e(c),{for:"link"},{default:a(()=>[...s[13]||(s[13]=[p("Link (Optional)",-1)])]),_:1}),o(e(h),{id:"link",type:"url",modelValue:e(t).link,"onUpdate:modelValue":s[2]||(s[2]=n=>e(t).link=n),placeholder:"https://example.com/document",class:f({"border-red-500":e(t).errors.link})},null,8,["modelValue","class"]),e(t).errors.link?(m(),u("p",ie,d(e(t).errors.link),1)):_("",!0),s[14]||(s[14]=r("p",{class:"text-xs text-gray-500"}," Provide a link to access the shared knowledge (if available online) ",-1))]),r("div",me,[o(e(c),{for:"date_shared"},{default:a(()=>[...s[15]||(s[15]=[p("Date Shared *",-1)])]),_:1}),o(e(h),{id:"date_shared",type:"date",modelValue:e(t).date_shared,"onUpdate:modelValue":s[3]||(s[3]=n=>e(t).date_shared=n),class:f({"border-red-500":e(t).errors.date_shared})},null,8,["modelValue","class"]),e(t).errors.date_shared?(m(),u("p",pe,d(e(t).errors.date_shared),1)):_("",!0)]),r("div",ue,[o(e(c),{for:"employee_id"},{default:a(()=>[...s[16]||(s[16]=[p("Employee",-1)])]),_:1}),r("div",_e,[l.knowledge_sharing.employee?(m(),u("span",ce,d(l.knowledge_sharing.employee.first_name)+" "+d(l.knowledge_sharing.employee.last_name)+" ("+d(l.knowledge_sharing.employee.position)+", "+d(l.knowledge_sharing.employee.department)+") ",1)):(m(),u("span",ge," Employee ID: "+d(e(t).employee_id),1))]),e(t).errors.employee_id?(m(),u("p",ye,d(e(t).errors.employee_id),1)):_("",!0)])]),_:1})]),_:1}),r("div",fe,[o(e(k),{type:"button",variant:"outline",onClick:x,class:"cursor-pointer"},{default:a(()=>[...s[17]||(s[17]=[p("Cancel",-1)])]),_:1}),o(e(k),{type:"submit",loading:e(t).processing,class:"cursor-pointer"},{default:a(()=>[...s[18]||(s[18]=[p("Update Knowledge",-1)])]),_:1},8,["loading"])])],32)])]),_:1})],64))}});export{$e as default};
